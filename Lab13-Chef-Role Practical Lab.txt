  * directory[/home/ec2-user/chef-repo/cookbooks/software/spec/unit/recipes] action create
    - create new directory /home/ec2-user/chef-repo/cookbooks/software/spec/unit/recipes
    - restore selinux security context
  * cookbook_file[/home/ec2-user/chef-repo/cookbooks/software/spec/spec_helper.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/software/spec/spec_helper.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/software/spec/spec_helper.rb from none to 945e09
    (diff output suppressed by config)
    - restore selinux security context
  * template[/home/ec2-user/chef-repo/cookbooks/software/spec/unit/recipes/software_spec.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/software/spec/unit/recipes/software_spec.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/software/spec/unit/recipes/software_spec.rb from none to f5f514
    (diff output suppressed by config)
    - restore selinux security context
  * directory[/home/ec2-user/chef-repo/cookbooks/software/test/integration/default] action create (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/software/test/integration/default/software_test.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/software/test/integration/default/software_test.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/software/test/integration/default/software_test.rb fromnone to 5c40be
    (diff output suppressed by config)
    - restore selinux security context
  * template[/home/ec2-user/chef-repo/cookbooks/software/recipes/software.rb] action create
    - create new file /home/ec2-user/chef-repo/cookbooks/software/recipes/software.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/software/recipes/software.rb from none to e4db2e
    (diff output suppressed by config)
    - restore selinux security context
[root@ip-172-31-5-1 software]# tree
.
├── CHANGELOG.md
├── LICENSE
├── Policyfile.rb
├── README.md
├── chefignore
├── compliance
│   ├── README.md
│   ├── inputs
│   ├── profiles
│   └── waivers
├── kitchen.yml
├── metadata.rb
├── recipes
│   ├── default.rb
│   └── software.rb
├── spec
│   ├── spec_helper.rb
│   └── unit
│       └── recipes
│           └── software_spec.rb
└── test
    └── integration
        └── default
            ├── default_test.rb
            └── software_test.rb

11 directories, 14 files
[root@ip-172-31-5-1 software]# vi recipes/software.rb
[root@ip-172-31-5-1 software]# cd ..
[root@ip-172-31-5-1 cookbooks]# ls
apache-book  chefignore  software  starter
[root@ip-172-31-5-1 cookbooks]# cd ..
[root@ip-172-31-5-1 chef-repo]# cd ..
[root@ip-172-31-5-1 ec2-user]# ls
chef-repo
[root@ip-172-31-5-1 ec2-user]# cd chef-repo/
[root@ip-172-31-5-1 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-5-1 chef-repo]# cd roles/
[root@ip-172-31-5-1 roles]# ls
starter.rb
[root@ip-172-31-5-1 roles]# # recipes/dev_tools.rb

# Update system packages
execute 'yum_update' do
  command 'yum update -y'
end

# Install Git
package 'git' do
  action :install
end

# Enable and install Docker
execute 'enable_docker' do
  command 'amazon-linux-extras enable docker'
  not_if 'amazon-linux-extras list | grep docker | grep enabled'
end

package 'docker' do
  action :install
end

service 'docker' do
  action [:enable, :start]
end

# Add ec2-user to docker group
execute 'add_ec2_user_to_docker' do
  command 'usermod -aG docker ec2-user'
  not_if 'groups ec2-user | grep docker'
end

# Enable and install Node.js
execute 'enable_nodejs' do
  command 'amazon-linux-extras enable nodejs'
  not_if 'amazon-linux-extras list | grep nodejs | grep enabled'
end

package 'nodejs' do
  action :install
end
bash: execute: command not found
bash: yum update -y: command not found
bash: end: command not found
bash: package: command not found
bash: action: command not found
bash: end: command not found
bash: execute: command not found
bash: amazon-linux-extras enable docker: command not found
bash: not_if: command not found
bash: end: command not found
bash: package: command not found
bash: action: command not found
bash: end: command not found
The service command supports only basic LSB actions (start, stop, restart, try-restart, reload, reload-or-restart, try-reload-or-restart, force-reload, status, condrestart). For other actions, please try to use systemctl.
bash: action: command not found
bash: end: command not found
bash: execute: command not found
bash: usermod -aG docker ec2-user: command not found
bash: not_if: command not found
bash: end: command not found
bash: execute: command not found
bash: amazon-linux-extras enable nodejs: command not found
bash: not_if: command not found
bash: end: command not found
bash: package: command not found
bash: action: command not found
bash: end: command not found
[root@ip-172-31-5-1 roles]#
[root@ip-172-31-5-1 roles]#
[root@ip-172-31-5-1 roles]#
[root@ip-172-31-5-1 roles]#
[root@ip-172-31-5-1 roles]#
[root@ip-172-31-5-1 roles]#
[root@ip-172-31-5-1 roles]# ls
starter.rb
[root@ip-172-31-5-1 roles]#
[root@ip-172-31-5-1 roles]# pwd
/home/ec2-user/chef-repo/roles
[root@ip-172-31-5-1 roles]# vi update.rb
[root@ip-172-31-5-1 roles]# cd ..
[root@ip-172-31-5-1 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-5-1 chef-repo]# cd cookbooks/
[root@ip-172-31-5-1 cookbooks]# ls
apache-book  chefignore  software  starter
[root@ip-172-31-5-1 cookbooks]# tree
.
├── apache-book
│   ├── CHANGELOG.md
│   ├── LICENSE
│   ├── Policyfile.rb
│   ├── README.md
│   ├── chefignore
│   ├── compliance
│   │   ├── README.md
│   │   ├── inputs
│   │   ├── profiles
│   │   └── waivers
│   ├── kitchen.yml
│   ├── metadata.rb
│   ├── recipes
│   │   ├── default.rb
│   │   └── webserver.rb
│   ├── spec
│   │   ├── spec_helper.rb
│   │   └── unit
│   │       └── recipes
│   │           └── webserver_spec.rb
│   └── test
│       └── integration
│           └── default
│               ├── default_test.rb
│               └── webserver_test.rb
├── chefignore
├── software
│   ├── CHANGELOG.md
│   ├── LICENSE
│   ├── Policyfile.rb
│   ├── README.md
│   ├── chefignore
│   ├── compliance
│   │   ├── README.md
│   │   ├── inputs
│   │   ├── profiles
│   │   └── waivers
│   ├── kitchen.yml
│   ├── metadata.rb
│   ├── recipes
│   │   ├── default.rb
│   │   └── software.rb
│   ├── spec
│   │   ├── spec_helper.rb
│   │   └── unit
│   │       └── recipes
│   │           └── software_spec.rb
│   └── test
│       └── integration
│           └── default
│               ├── default_test.rb
│               └── software_test.rb
└── starter
    ├── attributes
    │   └── default.rb
    ├── files
    │   └── default
    │       └── sample.txt
    ├── metadata.rb
    ├── recipes
    │   └── default.rb
    └── templates
        └── default
            └── sample.erb

31 directories, 34 files
[root@ip-172-31-5-1 cookbooks]# cd ..
[root@ip-172-31-5-1 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-5-1 chef-repo]# cd roles/
[root@ip-172-31-5-1 roles]# l
bash: l: command not found
[root@ip-172-31-5-1 roles]# ls
starter.rb  update.rb
[root@ip-172-31-5-1 roles]# vi update.rb
[root@ip-172-31-5-1 roles]# vi update.rb
[root@ip-172-31-5-1 roles]# cat update.rb


name "update-server"
description "web anad software installation"
run_list "recipe[apache-book::webserver]"

[root@ip-172-31-5-1 roles]# touch update1.rb
[root@ip-172-31-5-1 roles]# vi update1.rb
[root@ip-172-31-5-1 roles]# ls
starter.rb  update.rb  update1.rb
[root@ip-172-31-5-1 roles]# rm -rf update1.rb
[root@ip-172-31-5-1 roles]# ls
starter.rb  update.rb
[root@ip-172-31-5-1 roles]# cd ..
[root@ip-172-31-5-1 chef-repo]# knife role from file roles/update.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role update-server
[root@ip-172-31-5-1 chef-repo]# cd roles/
[root@ip-172-31-5-1 roles]# ls
starter.rb  update.rb
[root@ip-172-31-5-1 roles]# cd ..
[root@ip-172-31-5-1 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-5-1 chef-repo]# knife cookbook upload apache-book
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading apache-book  [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving apache-book
INFO: Uploading files
INFO: Uploading /tmp/d20251006-27671-wdsixm/apache-book/metadata.rb (checksum hex = 1243c6a0b4d18a4b328ef36a3e0c0dad) to https://ip-172-31-9-5.ap-south-1.compute.internal:443/bookshelf/organization-8a5d3935ca659bf322fd932a5eac4167/checksum-1243c6a0b4d18a4b328ef36a3e0c0dad?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=61a41c0d7728baab6bdd43e67a0d986dc74f540c%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T111318Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=cbe0d8991e1792ddc238d54caaeb9d73d289a776ae260cc45a50ca6edcd6ca97
INFO: Uploading /tmp/d20251006-27671-wdsixm/apache-book/recipes/default.rb (checksum hex = 64917eace104b0881964133331bbcc50) to https://ip-172-31-9-5.ap-south-1.compute.internal:443/bookshelf/organization-8a5d3935ca659bf322fd932a5eac4167/checksum-64917eace104b0881964133331bbcc50?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=61a41c0d7728baab6bdd43e67a0d986dc74f540c%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T111318Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=713f5f38a35b54f780c28ed3856ea4cfc2f14e863a26c2f420e6749c5dd44f44
INFO: Uploading /tmp/d20251006-27671-wdsixm/apache-book/chefignore (checksum hex = 7d1bb2b845312c449ca22b3a71f32d78) tohttps://ip-172-31-9-5.ap-south-1.compute.internal:443/bookshelf/organization-8a5d3935ca659bf322fd932a5eac4167/checksum-7d1bb2b845312c449ca22b3a71f32d78?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=61a41c0d7728baab6bdd43e67a0d986dc74f540c%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T111318Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=968936bd4db3c95a5e3a1d33f373f55d6268501d342e2cc9d5f424c7c58f0037
INFO: Uploading /tmp/d20251006-27671-wdsixm/apache-book/metadata.json (checksum hex = 839bd5982f9252db08c3fb0baf379c05)to https://ip-172-31-9-5.ap-south-1.compute.internal:443/bookshelf/organization-8a5d3935ca659bf322fd932a5eac4167/checksum-839bd5982f9252db08c3fb0baf379c05?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=61a41c0d7728baab6bdd43e67a0d986dc74f540c%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T111318Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=0b0bb1003308d5ed00959425a4cc68ef5281375f1c98c5e7d21262c2770dc08a
INFO: Uploading /tmp/d20251006-27671-wdsixm/apache-book/CHANGELOG.md (checksum hex = 8769278a8fd0dc341d7f0e88d8bc7459) to https://ip-172-31-9-5.ap-south-1.compute.internal:443/bookshelf/organization-8a5d3935ca659bf322fd932a5eac4167/checksum-8769278a8fd0dc341d7f0e88d8bc7459?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=61a41c0d7728baab6bdd43e67a0d986dc74f540c%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T111318Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=492043b6d053fee52be321d138d9830460b5e138938d7f5b8a19bbf48aa8680d
INFO: Uploading /tmp/d20251006-27671-wdsixm/apache-book/compliance/README.md (checksum hex = a221da015866d6ee6f511672b8fc89cf) to https://ip-172-31-9-5.ap-south-1.compute.internal:443/bookshelf/organization-8a5d3935ca659bf322fd932a5eac4167/checksum-a221da015866d6ee6f511672b8fc89cf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=61a41c0d7728baab6bdd43e67a0d986dc74f540c%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T111318Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=c9357c2dc6b64a21e284e015a8170a9a0ffb8a46cf01da8cd425b9a583113b92
INFO: Uploading /tmp/d20251006-27671-wdsixm/apache-book/recipes/webserver.rb (checksum hex = a60528ea6957b26f0a9082a163bffefb) to https://ip-172-31-9-5.ap-south-1.compute.internal:443/bookshelf/organization-8a5d3935ca659bf322fd932a5eac4167/checksum-a60528ea6957b26f0a9082a163bffefb?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=61a41c0d7728baab6bdd43e67a0d986dc74f540c%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T111318Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=9eadad8de7a2d852c8448aa82e97580c6487a5fd574ea3a61fcd13d31e1780f9
INFO: Uploading /tmp/d20251006-27671-wdsixm/apache-book/README.md (checksum hex = ac888161140856941af98c735f703fbf) to https://ip-172-31-9-5.ap-south-1.compute.internal:443/bookshelf/organization-8a5d3935ca659bf322fd932a5eac4167/checksum-ac888161140856941af98c735f703fbf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=61a41c0d7728baab6bdd43e67a0d986dc74f540c%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T111318Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=3d84cd25f834d6ebed982ec311f668dbcf66f7adafa296c9653df0c899fb9bb7
INFO: Uploading /tmp/d20251006-27671-wdsixm/apache-book/LICENSE (checksum hex = c02730a32568476981ec96fea98166ba) to https://ip-172-31-9-5.ap-south-1.compute.internal:443/bookshelf/organization-8a5d3935ca659bf322fd932a5eac4167/checksum-c02730a32568476981ec96fea98166ba?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=61a41c0d7728baab6bdd43e67a0d986dc74f540c%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T111318Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=b58021c4661c1b913e612c0cb567415032d50d2ca5605f076e6e6d8e9fdc44c8
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-5-1 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-5-1 chef-repo]# knife bootstrap 172.31.1.116 -N node1 --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -vv
Chef Infra Client: 18.8.11
[root@ip-172-31-5-1 chef-repo]# knife bootstrap 172.31.1.116 -N mynode --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.1.116 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.1.116
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.1.116 ()' can't be established.
fingerprint is SHA256:rfpWVwGm10bgxPuX6QsQCSm6QEibpdEjtiJZOmbCheY.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.1.116 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.1.116
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = show version
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sudo mkdir -p '/tmp/chef_bPiRHc'
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sudo chown ec2-user '/tmp/chef_bPiRHc'
Bootstrapping 172.31.1.116
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sudo sh /tmp/chef_bPiRHc/bootstrap.sh
 [172.31.1.116] -----> Installing Chef Omnibus (stable/latest)
downloading https://omnitruck.chef.io/chef/install.sh
  to file /tmp/install.sh.4110/install.sh
trying wget...
 [172.31.1.116] amazon 2023 x86_64
Getting information for chef stable latest for amazon...
downloading https://omnitruck.chef.io/stable/chef/metadata?v=latest&p=amazon&pv=2023&m=x86_64
  to file /tmp/install.sh.4114/metadata.txt
 [172.31.1.116] trying wget...
 [172.31.1.116] sha1    262cc97e8c66f6cd1b865190fc17d725fee68aac
sha256  8bcb6286938b8f8df08b6229919e973f95a74a70e1122e3df194433f289fc534
url     https://packages.chef.io/files/stable/chef/18.8.11/amazon/2023/chef-18.8.11-1.amazon2023.x86_64.rpm
version 18.8.11
 [172.31.1.116]
 [172.31.1.116] downloaded metadata file looks valid...
 [172.31.1.116] downloading https://packages.chef.io/files/stable/chef/18.8.11/amazon/2023/chef-18.8.11-1.amazon2023.x86_64.rpm
  to file /tmp/install.sh.4114/chef-18.8.11-1.amazon2023.x86_64.rpm
 [172.31.1.116] trying wget...
 [172.31.1.116] Comparing checksum with sha256sum...
 [172.31.1.116] Installing chef latest
installing with rpm...
 [172.31.1.116] warning:
 [172.31.1.116] /tmp/install.sh.4114/chef-18.8.11-1.amazon2023.x86_64.rpm: Header V4 DSA/SHA256 Signature, key ID 83ef826a: NOKEY
 [172.31.1.116] Verifying...
 [172.31.1.116] ########################################
 [172.31.1.116]
 [172.31.1.116] Preparing...
 [172.31.1.116] ########################################
 [172.31.1.116]
 [172.31.1.116] Updating / installing...
chef-18.8.11-1.amazon2023
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116] #
 [172.31.1.116]
 [172.31.1.116] Thank you for installing Chef Infra Client! For help getting started visit https://learn.chef.io
 [172.31.1.116] Starting the first Chef Infra Client Client run...
 [172.31.1.116] [2025-10-06T11:17:40+00:00] DEBUG: Reading products and relationships...
 [172.31.1.116] [2025-10-06T11:17:40+00:00] DEBUG: Successfully read products and relationships
 [172.31.1.116] [2025-10-06T11:17:40+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.1.116] [2025-10-06T11:17:40+00:00] DEBUG: Missing licenses remaining: ["infra-client", "inspec"]
 [172.31.1.116] [2025-10-06T11:17:40+00:00] INFO: Persisting a license for Chef Infra Client at path /etc/chef/accepted_licenses/chef_infra_client
 [172.31.1.116] [2025-10-06T11:17:40+00:00] INFO: Persisting a license for Chef InSpec at path /etc/chef/accepted_licenses/inspec
 [172.31.1.116] +---------------------------------------------+
✔ 2 product licenses accepted.
+---------------------------------------------+
 [172.31.1.116] [2025-10-06T11:17:40+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.1.116] Chef Infra Client, version 18.8.11
 [172.31.1.116]
 [172.31.1.116] Patents: https://www.chef.io/patents
 [172.31.1.116]
 [172.31.1.116] Infra Phase starting
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:17:40+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.1.116] [2025-10-06T11:17:40+00:00] INFO: Platform: x86_64-linux
 [172.31.1.116] [2025-10-06T11:17:40+00:00] INFO: Chef-client pid: 4185
 [172.31.1.116] [2025-10-06T11:17:40+00:00] DEBUG: Chef-client request_id: 9a4c1555-16e5-406c-8f09-fcfa61cc847c
 [172.31.1.116] [2025-10-06T11:17:40+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:17:41+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:42+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
Creating a new client identity for mynode using the validator key.
[2025-10-06T11:17:42+00:00] INFO: Client key /etc/chef/client.pem is not present - registering
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: Extracting run list from JSON attributes provided on command line
 [172.31.1.116] [2025-10-06T11:17:42+00:00] INFO: Setting the run_list to [] from CLI options
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: Applying attributes from json file
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: Platform is amazon version 2023
 [172.31.1.116] [2025-10-06T11:17:42+00:00] INFO: Run List is []
 [172.31.1.116] [2025-10-06T11:17:42+00:00] INFO: Run List expands to []
 [172.31.1.116] [2025-10-06T11:17:42+00:00] INFO: Starting Chef Infra Client Run for mynode
 [172.31.1.116] [2025-10-06T11:17:42+00:00] INFO: Running start handlers
 [172.31.1.116] [2025-10-06T11:17:42+00:00] INFO: Start handlers complete.
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-9-5.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] Resolving cookbooks for run list: []
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:42+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] [2025-10-06T11:17:42+00:00] INFO: Loading cookbooks []
 [172.31.1.116] Synchronizing cookbooks:
 [172.31.1.116]
 [172.31.1.116] Installing cookbook gem dependencies:
 [172.31.1.116] Compiling cookbooks...
[2025-10-06T11:17:42+00:00] DEBUG: Cookbooks to compile: []
 [172.31.1.116] Loading Chef InSpec profile files:
 [172.31.1.116]
 [172.31.1.116] Loading Chef InSpec input files:
 [172.31.1.116]
 [172.31.1.116] Loading Chef InSpec waiver files:
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:17:43+00:00] WARN: Node mynode has an empty run list.
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] Converging 0 resources
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: Converging node mynode
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: Saving the current state of node mynode
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] [2025-10-06T11:17:43+00:00] INFO: Chef Infra Client Run complete in 0.730042314 seconds
 [172.31.1.116]
 [172.31.1.116] Running handlers:
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:17:43+00:00] INFO: Running report handlers
 [172.31.1.116] Running handlers complete
 [172.31.1.116] [2025-10-06T11:17:43+00:00] INFO: Report handlers complete
 [172.31.1.116] Infra Phase complete, 0/0 resources updated in 02 seconds
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.1.116] [2025-10-06T11:17:43+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
WARNING:
       +---------------------------------------------------------------------------------------------------------------------+
         To ensure uninterrupted downloads of Infra Client, Knife Bootstrap will soon require a license key.

         Here's what you need to know:
           * Adding a License: Use the < knife license > command to easily add a license key.
           * For Commercial Customers: Obtain your license key from the customer portal.
           * For Free/Trial Users: Non-commercial users can generate a license key from https://www.chef.io/license-generation-free-trial

         No action is require at this time, but please prepare for this change.
       +---------------------------------------------------------------------------------------------------------------------+
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sudo rm -f "/tmp/chef_bPiRHc/bootstrap.sh"
[root@ip-172-31-5-1 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
mynode
[root@ip-172-31-5-1 chef-repo]# knife role run_list add mynode "role[update]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: The object you are looking for could not be found
Response: Cannot load role mynode
[root@ip-172-31-5-1 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-5-1 chef-repo]# cd roles/
[root@ip-172-31-5-1 roles]# ls
starter.rb  update.rb
[root@ip-172-31-5-1 roles]# cd ..
[root@ip-172-31-5-1 chef-repo]# knife node run_list add mynode "role[update]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
mynode:
  run_list: role[update]
[root@ip-172-31-5-1 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-5-1 chef-repo]# cd cookbooks/
[root@ip-172-31-5-1 cookbooks]# ls
apache-book  chefignore  software  starter
[root@ip-172-31-5-1 cookbooks]# chef generate cookbook auto-update
Hyphens are discouraged in cookbook names as they may cause problems with custom resources. See https://docs.chef.io/workstation/ctl_chef/#chef-generate-cookbook for more information.
Generating cookbook auto-update
- Ensuring correct cookbook content

Your cookbook is ready. Type `cd auto-update` to enter it.

There are several commands you can run to get started locally developing and testing your cookbook.

Why not start by writing an InSpec test? Tests for the default recipe are stored at:

test/integration/default/default_test.rb

If you'd prefer to dive right in, the default recipe can be found at:

recipes/default.rb

[root@ip-172-31-5-1 cookbooks]# cd auto-update/
[root@ip-172-31-5-1 auto-update]# ls
CHANGELOG.md  LICENSE  Policyfile.rb  README.md  chefignore  compliance  kitchen.yml  metadata.rb  recipes  test
[root@ip-172-31-5-1 auto-update]# chef generate recipe auto-update
Recipe: code_generator::recipe
  * directory[/home/ec2-user/chef-repo/cookbooks/auto-update/spec/unit/recipes] action create
    - create new directory /home/ec2-user/chef-repo/cookbooks/auto-update/spec/unit/recipes
    - restore selinux security context
  * cookbook_file[/home/ec2-user/chef-repo/cookbooks/auto-update/spec/spec_helper.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/auto-update/spec/spec_helper.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/auto-update/spec/spec_helper.rb from none to 945e09
    (diff output suppressed by config)
    - restore selinux security context
  * template[/home/ec2-user/chef-repo/cookbooks/auto-update/spec/unit/recipes/auto-update_spec.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/auto-update/spec/unit/recipes/auto-update_spec.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/auto-update/spec/unit/recipes/auto-update_spec.rb from none to e9edce
    (diff output suppressed by config)
    - restore selinux security context
  * directory[/home/ec2-user/chef-repo/cookbooks/auto-update/test/integration/default] action create (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/auto-update/test/integration/default/auto-update_test.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/auto-update/test/integration/default/auto-update_test.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/auto-update/test/integration/default/auto-update_test.rb from none to 086c8e
    (diff output suppressed by config)
    - restore selinux security context
  * template[/home/ec2-user/chef-repo/cookbooks/auto-update/recipes/auto-update.rb] action create
    - create new file /home/ec2-user/chef-repo/cookbooks/auto-update/recipes/auto-update.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/auto-update/recipes/auto-update.rb from none to 85a83c
    (diff output suppressed by config)
    - restore selinux security context
[root@ip-172-31-5-1 auto-update]# vi recipes/auto-update.rb
[root@ip-172-31-5-1 auto-update]# cd ..
[root@ip-172-31-5-1 cookbooks]# tree
.
├── apache-book
│   ├── CHANGELOG.md
│   ├── LICENSE
│   ├── Policyfile.rb
│   ├── README.md
│   ├── chefignore
│   ├── compliance
│   │   ├── README.md
│   │   ├── inputs
│   │   ├── profiles
│   │   └── waivers
│   ├── kitchen.yml
│   ├── metadata.rb
│   ├── recipes
│   │   ├── default.rb
│   │   └── webserver.rb
│   ├── spec
│   │   ├── spec_helper.rb
│   │   └── unit
│   │       └── recipes
│   │           └── webserver_spec.rb
│   └── test
│       └── integration
│           └── default
│               ├── default_test.rb
│               └── webserver_test.rb
├── auto-update
│   ├── CHANGELOG.md
│   ├── LICENSE
│   ├── Policyfile.rb
│   ├── README.md
│   ├── chefignore
│   ├── compliance
│   │   ├── README.md
│   │   ├── inputs
│   │   ├── profiles
│   │   └── waivers
│   ├── kitchen.yml
│   ├── metadata.rb
│   ├── recipes
│   │   ├── auto-update.rb
│   │   └── default.rb
│   ├── spec
│   │   ├── spec_helper.rb
│   │   └── unit
│   │       └── recipes
│   │           └── auto-update_spec.rb
│   └── test
│       └── integration
│           └── default
│               ├── auto-update_test.rb
│               └── default_test.rb
├── chefignore
├── software
│   ├── CHANGELOG.md
│   ├── LICENSE
│   ├── Policyfile.rb
│   ├── README.md
│   ├── chefignore
│   ├── compliance
│   │   ├── README.md
│   │   ├── inputs
│   │   ├── profiles
│   │   └── waivers
│   ├── kitchen.yml
│   ├── metadata.rb
│   ├── recipes
│   │   ├── default.rb
│   │   └── software.rb
│   ├── spec
│   │   ├── spec_helper.rb
│   │   └── unit
│   │       └── recipes
│   │           └── software_spec.rb
│   └── test
│       └── integration
│           └── default
│               ├── default_test.rb
│               └── software_test.rb
└── starter
    ├── attributes
    │   └── default.rb
    ├── files
    │   └── default
    │       └── sample.txt
    ├── metadata.rb
    ├── recipes
    │   └── default.rb
    └── templates
        └── default
            └── sample.erb

43 directories, 48 files
[root@ip-172-31-5-1 cookbooks]# rm -rf auto-update/
[root@ip-172-31-5-1 cookbooks]# tree
.
├── apache-book
│   ├── CHANGELOG.md
│   ├── LICENSE
│   ├── Policyfile.rb
│   ├── README.md
│   ├── chefignore
│   ├── compliance
│   │   ├── README.md
│   │   ├── inputs
│   │   ├── profiles
│   │   └── waivers
│   ├── kitchen.yml
│   ├── metadata.rb
│   ├── recipes
│   │   ├── default.rb
│   │   └── webserver.rb
│   ├── spec
│   │   ├── spec_helper.rb
│   │   └── unit
│   │       └── recipes
│   │           └── webserver_spec.rb
│   └── test
│       └── integration
│           └── default
│               ├── default_test.rb
│               └── webserver_test.rb
├── chefignore
├── software
│   ├── CHANGELOG.md
│   ├── LICENSE
│   ├── Policyfile.rb
│   ├── README.md
│   ├── chefignore
│   ├── compliance
│   │   ├── README.md
│   │   ├── inputs
│   │   ├── profiles
│   │   └── waivers
│   ├── kitchen.yml
│   ├── metadata.rb
│   ├── recipes
│   │   ├── default.rb
│   │   └── software.rb
│   ├── spec
│   │   ├── spec_helper.rb
│   │   └── unit
│   │       └── recipes
│   │           └── software_spec.rb
│   └── test
│       └── integration
│           └── default
│               ├── default_test.rb
│               └── software_test.rb
└── starter
    ├── attributes
    │   └── default.rb
    ├── files
    │   └── default
    │       └── sample.txt
    ├── metadata.rb
    ├── recipes
    │   └── default.rb
    └── templates
        └── default
            └── sample.erb

31 directories, 34 files
[root@ip-172-31-5-1 cookbooks]# cd apache-book/
[root@ip-172-31-5-1 apache-book]# chef generate recipe autoupdate
Recipe: code_generator::recipe
  * directory[/home/ec2-user/chef-repo/cookbooks/apache-book/spec/unit/recipes] action create (up to date)
  * cookbook_file[/home/ec2-user/chef-repo/cookbooks/apache-book/spec/spec_helper.rb] action create_if_missing (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/apache-book/spec/unit/recipes/autoupdate_spec.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/apache-book/spec/unit/recipes/autoupdate_spec.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/apache-book/spec/unit/recipes/autoupdate_spec.rb from none to 92cf5e
    (diff output suppressed by config)
    - restore selinux security context
  * directory[/home/ec2-user/chef-repo/cookbooks/apache-book/test/integration/default] action create (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/apache-book/test/integration/default/autoupdate_test.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/apache-book/test/integration/default/autoupdate_test.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/apache-book/test/integration/default/autoupdate_test.rbfrom none to 5e373c
    (diff output suppressed by config)
    - restore selinux security context
  * template[/home/ec2-user/chef-repo/cookbooks/apache-book/recipes/autoupdate.rb] action create
    - create new file /home/ec2-user/chef-repo/cookbooks/apache-book/recipes/autoupdate.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/apache-book/recipes/autoupdate.rb from none to 0c5aa9
    (diff output suppressed by config)
    - restore selinux security context
[root@ip-172-31-5-1 apache-book]# vi recipes/autoupdate.rb
[root@ip-172-31-5-1 apache-book]# "recipes/autoupdate.rb" 43L, 580B written
[root@ip-172-31-5-1 apache-book]# tree
.
├── CHANGELOG.md
├── LICENSE
├── Policyfile.rb
├── README.md
├── chefignore
├── compliance
│   ├── README.md
│   ├── inputs
│   ├── profiles
│   └── waivers
├── kitchen.yml
├── metadata.rb
├── recipes
│   ├── autoupdate.rb
│   ├── default.rb
│   └── webserver.rb
├── spec
│   ├── spec_helper.rb
│   └── unit
│       └── recipes
│           ├── autoupdate_spec.rb
│           └── webserver_spec.rb
└── test
    └── integration
        └── default
            ├── autoupdate_test.rb
            ├── default_test.rb
            └── webserver_test.rb

11 directories, 17 files
[root@ip-172-31-5-1 apache-book]# cd ..
[root@ip-172-31-5-1 cookbooks]# tree
.
├── apache-book
│   ├── CHANGELOG.md
│   ├── LICENSE
│   ├── Policyfile.rb
│   ├── README.md
│   ├── chefignore
│   ├── compliance
│   │   ├── README.md
│   │   ├── inputs
│   │   ├── profiles
│   │   └── waivers
│   ├── kitchen.yml
│   ├── metadata.rb
│   ├── recipes
│   │   ├── autoupdate.rb
│   │   ├── default.rb
│   │   └── webserver.rb
│   ├── spec
│   │   ├── spec_helper.rb
│   │   └── unit
│   │       └── recipes
│   │           ├── autoupdate_spec.rb
│   │           └── webserver_spec.rb
│   └── test
│       └── integration
│           └── default
│               ├── autoupdate_test.rb
│               ├── default_test.rb
│               └── webserver_test.rb
├── chefignore
├── software
│   ├── CHANGELOG.md
│   ├── LICENSE
│   ├── Policyfile.rb
│   ├── README.md
│   ├── chefignore
│   ├── compliance
│   │   ├── README.md
│   │   ├── inputs
│   │   ├── profiles
│   │   └── waivers
│   ├── kitchen.yml
│   ├── metadata.rb
│   ├── recipes
│   │   ├── default.rb
│   │   └── software.rb
│   ├── spec
│   │   ├── spec_helper.rb
│   │   └── unit
│   │       └── recipes
│   │           └── software_spec.rb
│   └── test
│       └── integration
│           └── default
│               ├── default_test.rb
│               └── software_test.rb
└── starter
    ├── attributes
    │   └── default.rb
    ├── files
    │   └── default
    │       └── sample.txt
    ├── metadata.rb
    ├── recipes
    │   └── default.rb
    └── templates
        └── default
            └── sample.erb

31 directories, 37 files
[root@ip-172-31-5-1 cookbooks]# ls
apache-book  chefignore  software  starter
[root@ip-172-31-5-1 cookbooks]# cd ..
[root@ip-172-31-5-1 chef-repo]# knife cookbook upload apache-book
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading apache-book    [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving apache-book
INFO: Uploading files
INFO: Uploading /tmp/d20251006-28219-walnwm/apache-book/recipes/autoupdate.rb (checksum hex = 0fa7d58ef06b4a43c2264acebfc7fe47) to https://ip-172-31-9-5.ap-south-1.compute.internal:443/bookshelf/organization-8a5d3935ca659bf322fd932a5eac4167/checksum-0fa7d58ef06b4a43c2264acebfc7fe47?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=61a41c0d7728baab6bdd43e67a0d986dc74f540c%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T112557Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=3332d2cc6a1b6b1032244faea0a47a384c1c3e6e9a5f59283758913139a61941
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-5-1 chef-repo]# knife role from file roles/update.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role update-server
[root@ip-172-31-5-1 chef-repo]# #
# Cookbook:: apache-book
# Recipe:: time-sch
#
# Copyright:: 2025, The Authors, All Rights Reserved.
#




#
# Cookbook:: apache-book
# Recipe:: time-sch
#

# Install cronie (provides crontab)
package 'cronie' do
  action :install
end

# Enable and start cron service
service 'crond' do
  action [:enable, :start]
end

# Schedule chef-client to run every 30 minutes
cron 'chef-client-run' do
  minute '*/2'
  command '/opt/chef/bin/chef-client'
  user 'root'
end
bash: package: command not found
bash: action: command not found
bash: end: command not found
The service command supports only basic LSB actions (start, stop, restart, try-restart, reload, reload-or-restart, try-reload-or-restart, force-reload, status, condrestart). For other actions, please try to use systemctl.
bash: action: command not found
bash: end: command not found
bash: cron: command not found
bash: minute: command not found
bash: /opt/chef/bin/chef-client: No such file or directory
bash: user: command not found
bash: end: command not found
[root@ip-172-31-5-1 chef-repo]#
[root@ip-172-31-5-1 chef-repo]#
[root@ip-172-31-5-1 chef-repo]#
[root@ip-172-31-5-1 chef-repo]#
[root@ip-172-31-5-1 chef-repo]#
[root@ip-172-31-5-1 chef-repo]# knife node show mynode
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Node Name:   mynode
Environment: _default
FQDN:        ip-172-31-1-116.ap-south-1.compute.internal
IP:          13.204.45.6
Run List:    role[update]
Roles:
Recipes:
Platform:    amazon 2023
Tags:
[root@ip-172-31-5-1 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-5-1 chef-repo]# cd roles/
[root@ip-172-31-5-1 roles]# ls
starter.rb  update.rb
[root@ip-172-31-5-1 roles]# vi update.rb

[root@ip-172-31-5-1 roles]# cat update.rb


name "update-server"
description "web anad software installation"
run_list "recipe[apache-book::webserver],recipe[apache-book::autoupadate]"

[root@ip-172-31-5-1 roles]# cd ..
[root@ip-172-31-5-1 chef-repo]# knife role from file role/update.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: Could not find or open file 'role/update.rb' in current directory or in 'roles/role/update.rb'
[root@ip-172-31-5-1 chef-repo]# knife role from file roles/update.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: ArgumentError: Unable to create Chef::RunList::RunListItem from String:"recipe[apache-book::webserver],recipe[apache-book::autoupadate]": must be recipe[] or role[]
[root@ip-172-31-5-1 chef-repo]# cd roles/
[root@ip-172-31-5-1 roles]# ls
starter.rb  update.rb
[root@ip-172-31-5-1 roles]# vi update.rb
[root@ip-172-31-5-1 roles]# cat update.rb


name "update-server"
description "web anad software installation"
run_list "recipe[apache-book]"

[root@ip-172-31-5-1 roles]# knife role from file roles/update.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: Could not find or open file 'roles/update.rb' in current directory or in 'roles/roles/update.rb'
[root@ip-172-31-5-1 roles]# cd ..
[root@ip-172-31-5-1 chef-repo]# knife role from file roles/update.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role update-server
[root@ip-172-31-5-1 chef-repo]# knife cookbook upload apache-book
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading apache-book    [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving apache-book
INFO: Uploading files
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-5-1 chef-repo]#  knife bootstrap 172.31.1.116 -N mynode --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
bash:  knife: command not found
[root@ip-172-31-5-1 chef-repo]# knife bootstrap 172.31.1.116 -N mynode --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.1.116 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.1.116
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.1.116 ()' can't be established.
fingerprint is SHA256:rfpWVwGm10bgxPuX6QsQCSm6QEibpdEjtiJZOmbCheY.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.1.116 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.1.116
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = show version
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sudo mkdir -p '/tmp/chef_aZc8Wb'
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sudo chown ec2-user '/tmp/chef_aZc8Wb'
Bootstrapping 172.31.1.116
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sudo sh /tmp/chef_aZc8Wb/bootstrap.sh
 [172.31.1.116] -----> Existing Chef Infra Client installation detected
 [172.31.1.116] Starting the first Chef Infra Client Client run...
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: Reading products and relationships...
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: Successfully read products and relationships
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: Missing licenses remaining: []
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: All licenses present
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.1.116] Chef Infra Client, version 18.8.11
 [172.31.1.116]
 [172.31.1.116] Patents: https://www.chef.io/patents
 [172.31.1.116]
 [172.31.1.116] Infra Phase starting
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:42:49+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.1.116] [2025-10-06T11:42:49+00:00] INFO: Platform: x86_64-linux
 [172.31.1.116] [2025-10-06T11:42:49+00:00] INFO: Chef-client pid: 5565
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: Chef-client request_id: 427486b2-4285-4762-8733-fd10a49c1776
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.1.116] [2025-10-06T11:42:49+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:50+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.1.116] [2025-10-06T11:42:50+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Extracting run list from JSON attributes provided on command line
 [172.31.1.116] [2025-10-06T11:42:51+00:00] INFO: Setting the run_list to [] from CLI options
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Applying attributes from json file
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Platform is amazon version 2023
 [172.31.1.116] [2025-10-06T11:42:51+00:00] INFO: Run List is []
 [172.31.1.116] [2025-10-06T11:42:51+00:00] INFO: Run List expands to []
 [172.31.1.116] [2025-10-06T11:42:51+00:00] INFO: Starting Chef Infra Client Run for mynode
 [172.31.1.116] [2025-10-06T11:42:51+00:00] INFO: Running start handlers
 [172.31.1.116] [2025-10-06T11:42:51+00:00] INFO: Start handlers complete.
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-9-5.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] Resolving cookbooks for run list: []
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] [2025-10-06T11:42:51+00:00] INFO: Loading cookbooks []
 [172.31.1.116] Synchronizing cookbooks:
 [172.31.1.116]
 [172.31.1.116] Installing cookbook gem dependencies:
Compiling cookbooks...
[2025-10-06T11:42:51+00:00] DEBUG: Cookbooks to compile: []
 [172.31.1.116] Loading Chef InSpec profile files:
 [172.31.1.116]
 [172.31.1.116] Loading Chef InSpec input files:
 [172.31.1.116]
 [172.31.1.116] Loading Chef InSpec waiver files:
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:42:51+00:00] WARN: Node mynode has an empty run list.
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] Converging 0 resources
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Converging node mynode
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Saving the current state of node mynode
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opening connection to ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: opened
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: starting SSL for ip-172-31-9-5.ap-south-1.compute.internal:443...
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.1.116] [2025-10-06T11:42:51+00:00] INFO: Chef Infra Client Run complete in 0.660063902 seconds
 [172.31.1.116]
 [172.31.1.116] Running handlers:
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:42:51+00:00] INFO: Running report handlers
 [172.31.1.116] Running handlers complete
 [172.31.1.116] [2025-10-06T11:42:51+00:00] INFO: Report handlers complete
 [172.31.1.116] Infra Phase complete, 0/0 resources updated in 02 seconds
 [172.31.1.116]
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.1.116] [2025-10-06T11:42:51+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
WARNING:
       +---------------------------------------------------------------------------------------------------------------------+
         To ensure uninterrupted downloads of Infra Client, Knife Bootstrap will soon require a license key.

         Here's what you need to know:
           * Adding a License: Use the < knife license > command to easily add a license key.
           * For Commercial Customers: Obtain your license key from the customer portal.
           * For Free/Trial Users: Non-commercial users can generate a license key from https://www.chef.io/license-generation-free-trial

         No action is require at this time, but please prepare for this change.
       +---------------------------------------------------------------------------------------------------------------------+
DEBUG: [SSH] ec2-user@172.31.1.116 cmd = sudo rm -f "/tmp/chef_aZc8Wb/bootstrap.sh"
[root@ip-172-31-5-1 chef-repo]# knife node run_list add mynode "role[update]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
mynode:
  run_list: role[update]
[root@ip-172-31-5-1 chef-repo]#
Broadcast message from root@localhost (Mon 2025-10-06 11:48:14 UTC):

The system will power off now!


Broadcast message from root@localhost (Mon 2025-10-06 11:48:14 UTC):

The system will power off now!

Connection to 65.0.131.176 closed by remote host.
Connection to 65.0.131.176 closed.
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac> ssh -i .\id_rsa ec2-user@43.204.145.143
The authenticity of host '43.204.145.143 (43.204.145.143)' can't be established.
ED25519 key fingerprint is SHA256:bwQiJsJXrNpyWX8rwAvfGl2MHw0dFNaCOu5YGVqT/3Q.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '43.204.145.143' (ED25519) to the list of known hosts.

A newer release of "Amazon Linux" is available.
  Version 2023.8.20250908:
  Version 2023.8.20250915:
  Version 2023.9.20250929:
Run "/usr/bin/dnf check-release-update" for full release and version update info
   ,     #_
   ~\_  ####_        Amazon Linux 2023
  ~~  \_#####\
  ~~     \###|
  ~~       \#/ ___   https://aws.amazon.com/linux/amazon-linux-2023
   ~~       V~' '->
    ~~~         /
      ~~._.   _/
         _/ _/
       _/m/'
[ec2-user@ip-172-31-8-220 ~]$ sudo su
[root@ip-172-31-8-220 ec2-user]# chef -v

Chef Workstation version: 25.9.1094
Chef Infra Client version: 18.8.11
Chef InSpec version: 5.22.95
Chef CLI version: 5.6.21
Chef Habitat version: 1.6.1243
Test Kitchen version: 3.9.0
Cookstyle version: 7.32.8
[root@ip-172-31-8-220 ec2-user]#
[root@ip-172-31-8-220 ec2-user]# ls
chef-repo
[root@ip-172-31-8-220 ec2-user]# cd chef-repo/
[root@ip-172-31-8-220 chef-repo]# cd .chef/
[root@ip-172-31-8-220 .chef]# knife ssl fetch
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
WARNING: Certificates from ip-172-31-15-230.ap-south-1.compute.internal will be fetched and placed in your trusted_cert
       directory (/home/ec2-user/chef-repo/.chef/trusted_certs).

       Knife has no means to verify these are the correct certificates. You should
       verify the authenticity of these certificates after downloading.
Adding certificate for ip-172-31-15-230_ap-south-1_compute_internal in /home/ec2-user/chef-repo/.chef/trusted_certs/ip-172-31-15-230_ap-south-1_compute_internal.crt
[root@ip-172-31-8-220 .chef]# knife ssl check
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Connecting to host ip-172-31-15-230.ap-south-1.compute.internal:443
Successfully verified certificates from `ip-172-31-15-230.ap-south-1.compute.internal'
[root@ip-172-31-8-220 .chef]# cd ..
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  roles
[root@ip-172-31-8-220 chef-repo]# cd cookbooks/
[root@ip-172-31-8-220 cookbooks]# ls
chefignore  starter
[root@ip-172-31-8-220 cookbooks]# chef generate cookbook webserver
+---------------------------------------------+
            Chef License Acceptance

Before you can continue, 3 product licenses
must be accepted. View the license at
https://www.chef.io/end-user-license-agreement/

Licenses that need accepting:
  * Chef Workstation
  * Chef Infra Client
  * Chef InSpec

Do you accept the 3 product licenses (yes/no)?

> yes

Persisting 3 product licenses...
✔ 3 product licenses persisted.

+---------------------------------------------+
Generating cookbook webserver
- Ensuring correct cookbook content

Your cookbook is ready. Type `cd webserver` to enter it.

There are several commands you can run to get started locally developing and testing your cookbook.

Why not start by writing an InSpec test? Tests for the default recipe are stored at:

test/integration/default/default_test.rb

If you'd prefer to dive right in, the default recipe can be found at:

recipes/default.rb

[root@ip-172-31-8-220 cookbooks]# cd webserver/
[root@ip-172-31-8-220 webserver]# chef generate recipe webserver
Recipe: code_generator::recipe
  * directory[/home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes] action create
    - create new directory /home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes
    - restore selinux security context
  * cookbook_file[/home/ec2-user/chef-repo/cookbooks/webserver/spec/spec_helper.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/spec/spec_helper.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/spec/spec_helper.rb from none to 945e09
    (diff output suppressed by config)
    - restore selinux security context
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes/webserver_spec.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes/webserver_spec.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes/webserver_spec.rb from noneto 57b3e8
    (diff output suppressed by config)
    - restore selinux security context
  * directory[/home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default] action create (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default/webserver_test.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default/webserver_test.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default/webserver_test.rb from none to fd70dd
    (diff output suppressed by config)
    - restore selinux security context
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/recipes/webserver.rb] action create
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/recipes/webserver.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/recipes/webserver.rb from none to b137cb
    (diff output suppressed by config)
    - restore selinux security context
[root@ip-172-31-8-220 webserver]# yum install tree -t
usage: yum install [-c [config file]] [-q] [-v] [--version] [--installroot [path]] [--nodocs] [--noplugins] [--enableplugin [plugin]]
                   [--disableplugin [plugin]] [--releasever RELEASEVER] [--setopt SETOPTS] [--skip-broken] [-h] [--allowerasing] [-b | --nobest] [-C]
                   [-R [minutes]] [-d [debug level]] [--debugsolver] [--showduplicates] [-e ERRORLEVEL] [--obsoletes] [--rpmverbosity [debug level name]]
                   [-y] [--assumeno] [--enablerepo [repo]] [--disablerepo [repo] | --repo [repo]] [--enable | --disable] [-x [package]]
                   [--disableexcludes [repo]] [--repofrompath [repo,path]] [--noautoremove] [--nogpgcheck] [--color COLOR] [--refresh] [-4] [-6]
                   [--destdir DESTDIR] [--downloadonly] [--comment COMMENT] [--bugfix] [--enhancement] [--newpackage] [--security] [--advisory ADVISORY]
                   [--bz BUGZILLA] [--cve CVES] [--sec-severity {Critical,Important,Moderate,Medium,Low}] [--forcearch ARCH]
                   PACKAGE [PACKAGE ...]
yum install: error: unrecognized arguments: -t
[root@ip-172-31-8-220 webserver]# yum install tree -y
Last metadata expiration check: 0:05:59 ago on Mon Oct  6 12:16:59 2025.
Dependencies resolved.
============================================================================================================================================================
 Package                        Architecture                     Version                                        Repository                             Size
============================================================================================================================================================
Installing:
 tree                           x86_64                           1.8.0-6.amzn2023.0.2                           amazonlinux                            56 k

Transaction Summary
============================================================================================================================================================
Install  1 Package

Total download size: 56 k
Installed size: 113 k
Downloading Packages:
tree-1.8.0-6.amzn2023.0.2.x86_64.rpm    1.7 MB/s |  56 kB     00:00
------------------------------------------------------------------------------------------------------------------------------------------------------------
Total    949 kB/s |  56 kB     00:00
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                1/1
  Installing       : tree-1.8.0-6.amzn2023.0.2.x86_64                                1/1
  Running scriptlet: tree-1.8.0-6.amzn2023.0.2.x86_64                                1/1
  Verifying        : tree-1.8.0-6.amzn2023.0.2.x86_64                                1/1
============================================================================================================================================================
WARNING:
  A newer release of "Amazon Linux" is available.

  Available Versions:

  Version 2023.8.20250908:
    Run the following command to upgrade to 2023.8.20250908:

      dnf upgrade --releasever=2023.8.20250908

    Release notes:
     https://docs.aws.amazon.com/linux/al2023/release-notes/relnotes-2023.8.20250908.html

  Version 2023.8.20250915:
    Run the following command to upgrade to 2023.8.20250915:

      dnf upgrade --releasever=2023.8.20250915

    Release notes:
     https://docs.aws.amazon.com/linux/al2023/release-notes/relnotes-2023.8.20250915.html

  Version 2023.9.20250929:
    Run the following command to upgrade to 2023.9.20250929:

      dnf upgrade --releasever=2023.9.20250929

    Release notes:
     https://docs.aws.amazon.com/linux/al2023/release-notes/relnotes-2023.9.20250929.html

============================================================================================================================================================

Installed:
  tree-1.8.0-6.amzn2023.0.2.x86_64

Complete!
[root@ip-172-31-8-220 webserver]#
[root@ip-172-31-8-220 webserver]# tree
.
├── CHANGELOG.md
├── LICENSE
├── Policyfile.rb
├── README.md
├── chefignore
├── compliance
│   ├── README.md
│   ├── inputs
│   ├── profiles
│   └── waivers
├── kitchen.yml
├── metadata.rb
├── recipes
│   ├── default.rb
│   └── webserver.rb
├── spec
│   ├── spec_helper.rb
│   └── unit
│       └── recipes
│           └── webserver_spec.rb
└── test
    └── integration
        └── default
            ├── default_test.rb
            └── webserver_test.rb

11 directories, 14 files
[root@ip-172-31-8-220 webserver]# vi recipes/webserver.rb
[root@ip-172-31-8-220 webserver]# chef generate recipe autoupdate
Recipe: code_generator::recipe
  * directory[/home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes] action create (up to date)
  * cookbook_file[/home/ec2-user/chef-repo/cookbooks/webserver/spec/spec_helper.rb] action create_if_missing (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes/autoupdate_spec.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes/autoupdate_spec.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes/autoupdate_spec.rb from none to 48a804
    (diff output suppressed by config)
    - restore selinux security context
  * directory[/home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default] action create (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default/autoupdate_test.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default/autoupdate_test.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default/autoupdate_test.rb from none to 08dcd3
    (diff output suppressed by config)
    - restore selinux security context
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/recipes/autoupdate.rb] action create
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/recipes/autoupdate.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/recipes/autoupdate.rb from none to e02227
    (diff output suppressed by config)
    - restore selinux security context
[root@ip-172-31-8-220 webserver]# vi automate.rb
[root@ip-172-31-8-220 webserver]# tree
.
├── CHANGELOG.md
├── LICENSE
├── Policyfile.rb
├── README.md
├── automate.rb
├── chefignore
├── compliance
│   ├── README.md
│   ├── inputs
│   ├── profiles
│   └── waivers
├── kitchen.yml
├── metadata.rb
├── recipes
│   ├── autoupdate.rb
│   ├── default.rb
│   └── webserver.rb
├── spec
│   ├── spec_helper.rb
│   └── unit
│       └── recipes
│           ├── autoupdate_spec.rb
│           └── webserver_spec.rb
└── test
    └── integration
        └── default
            ├── autoupdate_test.rb
            ├── default_test.rb
            └── webserver_test.rb

11 directories, 18 files
[root@ip-172-31-8-220 webserver]# vi recipes/autoupdate.rb
[root@ip-172-31-8-220 webserver]# tree
.
├── CHANGELOG.md
├── LICENSE
├── Policyfile.rb
├── README.md
├── automate.rb
├── chefignore
├── compliance
│   ├── README.md
│   ├── inputs
│   ├── profiles
│   └── waivers
├── kitchen.yml
├── metadata.rb
├── recipes
│   ├── autoupdate.rb
│   ├── default.rb
│   └── webserver.rb
├── spec
│   ├── spec_helper.rb
│   └── unit
│       └── recipes
│           ├── autoupdate_spec.rb
│           └── webserver_spec.rb
└── test
    └── integration
        └── default
            ├── autoupdate_test.rb
            ├── default_test.rb
            └── webserver_test.rb

11 directories, 18 files
[root@ip-172-31-8-220 webserver]# cd ..
[root@ip-172-31-8-220 cookbooks]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife bootstrap 172.31.7.128 -N web-node --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.7.128 ()' can't be established.
fingerprint is SHA256:N2j7ar6bwtgFLs9KFT9ob4GcOxdjpfJmK6LGABNLXvM.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = show version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo mkdir -p '/tmp/chef_4BOI6Y'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo chown ec2-user '/tmp/chef_4BOI6Y'
Bootstrapping 172.31.7.128
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo sh /tmp/chef_4BOI6Y/bootstrap.sh
 [172.31.7.128] -----> Installing Chef Omnibus (stable/latest)
downloading https://omnitruck.chef.io/chef/install.sh
  to file /tmp/install.sh.3384/install.sh
trying wget...
 [172.31.7.128] amazon 2023 x86_64
Getting information for chef stable latest for amazon...
downloading https://omnitruck.chef.io/stable/chef/metadata?v=latest&p=amazon&pv=2023&m=x86_64
  to file /tmp/install.sh.3388/metadata.txt
 [172.31.7.128] trying wget...
 [172.31.7.128] sha1    262cc97e8c66f6cd1b865190fc17d725fee68aac
sha256  8bcb6286938b8f8df08b6229919e973f95a74a70e1122e3df194433f289fc534
url     https://packages.chef.io/files/stable/chef/18.8.11/amazon/2023/chef-18.8.11-1.amazon2023.x86_64.rpm
version 18.8.11
 [172.31.7.128]
 [172.31.7.128] downloaded metadata file looks valid...
 [172.31.7.128] downloading https://packages.chef.io/files/stable/chef/18.8.11/amazon/2023/chef-18.8.11-1.amazon2023.x86_64.rpm
  to file /tmp/install.sh.3388/chef-18.8.11-1.amazon2023.x86_64.rpm
 [172.31.7.128] trying wget...
 [172.31.7.128] Comparing checksum with sha256sum...
 [172.31.7.128] Installing chef latest
installing with rpm...
 [172.31.7.128] warning:
 [172.31.7.128] /tmp/install.sh.3388/chef-18.8.11-1.amazon2023.x86_64.rpm: Header V4 DSA/SHA256 Signature, key ID 83ef826a: NOKEY
 [172.31.7.128] Verifying...
 [172.31.7.128] ########################################
 [172.31.7.128]
 [172.31.7.128] Preparing...
 [172.31.7.128] ########################################
 [172.31.7.128]
 [172.31.7.128] Updating / installing...
chef-18.8.11-1.amazon2023
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128] #
 [172.31.7.128]
 [172.31.7.128] Thank you for installing Chef Infra Client! For help getting started visit https://learn.chef.io
 [172.31.7.128] Starting the first Chef Infra Client Client run...
 [172.31.7.128] [2025-10-06T12:30:34+00:00] DEBUG: Reading products and relationships...
 [172.31.7.128] [2025-10-06T12:30:34+00:00] DEBUG: Successfully read products and relationships
 [172.31.7.128] [2025-10-06T12:30:34+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.7.128] [2025-10-06T12:30:34+00:00] DEBUG: Missing licenses remaining: ["infra-client", "inspec"]
 [172.31.7.128] [2025-10-06T12:30:34+00:00] INFO: Persisting a license for Chef Infra Client at path /etc/chef/accepted_licenses/chef_infra_client
 [172.31.7.128] [2025-10-06T12:30:34+00:00] INFO: Persisting a license for Chef InSpec at path /etc/chef/accepted_licenses/inspec
 [172.31.7.128] +---------------------------------------------+
✔ 2 product licenses accepted.
+---------------------------------------------+
 [172.31.7.128] [2025-10-06T12:30:34+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] Chef Infra Client, version 18.8.11
 [172.31.7.128]
 [172.31.7.128] Patents: https://www.chef.io/patents
 [172.31.7.128]
 [172.31.7.128] Infra Phase starting
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:30:34+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.7.128] [2025-10-06T12:30:34+00:00] INFO: Platform: x86_64-linux
 [172.31.7.128] [2025-10-06T12:30:34+00:00] INFO: Chef-client pid: 3459
 [172.31.7.128] [2025-10-06T12:30:34+00:00] DEBUG: Chef-client request_id: 94670b96-62e0-4e68-8a12-8026d431b7aa
 [172.31.7.128] [2025-10-06T12:30:34+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:30:35+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:36+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
Creating a new client identity for web-node using the validator key.
[2025-10-06T12:30:36+00:00] INFO: Client key /etc/chef/client.pem is not present - registering
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: Extracting run list from JSON attributes provided on command line
 [172.31.7.128] [2025-10-06T12:30:36+00:00] INFO: Setting the run_list to [] from CLI options
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: Applying attributes from json file
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: Platform is amazon version 2023
 [172.31.7.128] [2025-10-06T12:30:36+00:00] INFO: Run List is []
 [172.31.7.128] [2025-10-06T12:30:36+00:00] INFO: Run List expands to []
 [172.31.7.128] [2025-10-06T12:30:36+00:00] INFO: Starting Chef Infra Client Run for web-node
 [172.31.7.128] [2025-10-06T12:30:36+00:00] INFO: Running start handlers
 [172.31.7.128] [2025-10-06T12:30:36+00:00] INFO: Start handlers complete.
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] Resolving cookbooks for run list: []
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:36+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T12:30:36+00:00] INFO: Loading cookbooks []
 [172.31.7.128] Synchronizing cookbooks:
 [172.31.7.128]
 [172.31.7.128] Installing cookbook gem dependencies:
Compiling cookbooks...
[2025-10-06T12:30:36+00:00] DEBUG: Cookbooks to compile: []
 [172.31.7.128] Loading Chef InSpec profile files:
 [172.31.7.128]
 [172.31.7.128] Loading Chef InSpec input files:
 [172.31.7.128]
 [172.31.7.128] Loading Chef InSpec waiver files:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:30:37+00:00] WARN: Node web-node has an empty run list.
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] Converging 0 resources
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: Converging node web-node
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: Saving the current state of node web-node
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T12:30:37+00:00] INFO: Chef Infra Client Run complete in 0.689820616 seconds
 [172.31.7.128]
 [172.31.7.128] Running handlers:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:30:37+00:00] INFO: Running report handlers
 [172.31.7.128] Running handlers complete
 [172.31.7.128] [2025-10-06T12:30:37+00:00] INFO: Report handlers complete
 [172.31.7.128] Infra Phase complete, 0/0 resources updated in 02 seconds
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.7.128] [2025-10-06T12:30:37+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
WARNING:
       +---------------------------------------------------------------------------------------------------------------------+
         To ensure uninterrupted downloads of Infra Client, Knife Bootstrap will soon require a license key.

         Here's what you need to know:
           * Adding a License: Use the < knife license > command to easily add a license key.
           * For Commercial Customers: Obtain your license key from the customer portal.
           * For Free/Trial Users: Non-commercial users can generate a license key from https://www.chef.io/license-generation-free-trial

         No action is require at this time, but please prepare for this change.
       +---------------------------------------------------------------------------------------------------------------------+
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo rm -f "/tmp/chef_4BOI6Y/bootstrap.sh"
[root@ip-172-31-8-220 chef-repo]# cd ..
[root@ip-172-31-8-220 ec2-user]# cd chef-repo/
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# ls
starter.rb
[root@ip-172-31-8-220 roles]# vi webrole.rb
[root@ip-172-31-8-220 roles]# tree
.
├── starter.rb
└── webrole.rb

0 directories, 2 files
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# tree
.
├── README.md
├── cookbooks
│   ├── chefignore
│   ├── starter
│   │   ├── attributes
│   │   │   └── default.rb
│   │   ├── files
│   │   │   └── default
│   │   │       └── sample.txt
│   │   ├── metadata.rb
│   │   ├── recipes
│   │   │   └── default.rb
│   │   └── templates
│   │       └── default
│   │           └── sample.erb
│   └── webserver
│       ├── CHANGELOG.md
│       ├── LICENSE
│       ├── Policyfile.rb
│       ├── README.md
│       ├── automate.rb
│       ├── chefignore
│       ├── compliance
│       │   ├── README.md
│       │   ├── inputs
│       │   ├── profiles
│       │   └── waivers
│       ├── kitchen.yml
│       ├── metadata.rb
│       ├── recipes
│       │   ├── autoupdate.rb
│       │   ├── default.rb
│       │   └── webserver.rb
│       ├── spec
│       │   ├── spec_helper.rb
│       │   └── unit
│       │       └── recipes
│       │           ├── autoupdate_spec.rb
│       │           └── webserver_spec.rb
│       └── test
│           └── integration
│               └── default
│                   ├── autoupdate_test.rb
│                   ├── default_test.rb
│                   └── webserver_test.rb
├── id_rsa.pem
└── roles
    ├── starter.rb
    └── webrole.rb

21 directories, 28 files
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# ls
starter.rb  webrole.rb
[root@ip-172-31-8-220 roles]# vi webrole.rb
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver    [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/metadata.rb (checksum hex = 05ff18981b275ae53ee65dc9fffc8443) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-05ff18981b275ae53ee65dc9fffc8443?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=b39283eb9edffa0e5bcc620505b0dc7acc38c83057202477ba166baad07648a9
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/recipes/webserver.rb (checksum hex = 0c291263bbf5dd24f0f55e94f8020204) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-0c291263bbf5dd24f0f55e94f8020204?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=66de7e7678d3de13ccf9429a29d32b3dabf1bfa868728db7bb3e343f2ba027ad
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/recipes/autoupdate.rb (checksum hex = 0cb218eefadf03dccbbb57488f7058e6) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-0cb218eefadf03dccbbb57488f7058e6?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=27c03d4c9d10a6bc0dff6ea3b95add6506663be960ef484037f795a245eaf284
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/chefignore (checksum hex = 7d1bb2b845312c449ca22b3a71f32d78) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-7d1bb2b845312c449ca22b3a71f32d78?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=069153bd18aa6b2905bbfcc6140055eaec05af54bdce89ea733f17796fb00ce1
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/metadata.json (checksum hex = 84a82fd0d5fc87c61ed8135de0ba5b6b) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-84a82fd0d5fc87c61ed8135de0ba5b6b?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=f13f43862e80cf08b84197256f2b1d845a8f97e3de77f78e35c5222dfd7896fb
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/recipes/default.rb (checksum hex = 9ec1c1e101ecc201326e711ba480f3e6) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-9ec1c1e101ecc201326e711ba480f3e6?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=335d70e757ae4b2177427288a07578ca4acbe4e4f739893753e14b41b8a51843
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/compliance/README.md (checksum hex = a221da015866d6ee6f511672b8fc89cf) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-a221da015866d6ee6f511672b8fc89cf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=bd0a180cd10aab5566d5b4404ba21f049620463b8614073fd06094969e24dc33
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/LICENSE (checksum hex = c02730a32568476981ec96fea98166ba) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-c02730a32568476981ec96fea98166ba?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=32b60179dcd5f64cc4c26e908e51543073ba7cdd25f42053c35bb03195b6afdd
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/README.md (checksum hex = c394c20647acf417d899d2d47527b3d0) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-c394c20647acf417d899d2d47527b3d0?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=55851684e35de14f29f129688a55a54cfd54746d5cf92058e2679fdeb2a87470
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/CHANGELOG.md (checksum hex = c92ffc23402eeb2f7f963149aa74389e) tohttps://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-c92ffc23402eeb2f7f963149aa74389e?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=312894263da24ba90e897338e43f2c35c13cac6b3f55603776908393857a22d7
INFO: Uploading /tmp/d20251006-26694-fq9cbo/webserver/automate.rb (checksum hex = d41d8cd98f00b204e9800998ecf8427e) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-d41d8cd98f00b204e9800998ecf8427e?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T123547Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=0dd3219101388a937ae12a29a1e12fdf3b7870401b344b6cc710ea379d3e5c4d
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd roles
[root@ip-172-31-8-220 roles]# ls
starter.rb  webrole.rb
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife role form file roles/webrole.rb
FATAL: Cannot find subcommand for: 'role form file roles/webrole.rb'
Available role subcommands: (for details, knife SUB-COMMAND --help)

** ROLE COMMANDS **
knife role bulk delete REGEX (options)
knife role create ROLE (options)
knife role delete ROLE (options)
knife role edit ROLE (options)
knife role env_run_list add [ROLE] [ENVIRONMENT] [ENTRY [ENTRY]] (options)
knife role env_run_list clear [ROLE] [ENVIRONMENT] (options)
knife role env_run_list remove [ROLE] [ENVIRONMENT] [ENTRIES] (options)
knife role env_run_list replace [ROLE] [ENVIRONMENT] [OLD_ENTRY] [NEW_ENTRY] (options)
knife role env_run_list set [ROLE] [ENVIRONMENT] [ENTRIES] (options)
knife role from file FILE [FILE..] (options)
knife role list (options)
knife role run_list add [ROLE] [ENTRY [ENTRY]] (options)
knife role run_list clear [ROLE] (options)
knife role run_list remove [ROLE] [ENTRY] (options)
knife role run_list replace [ROLE] [OLD_ENTRY] [NEW_ENTRY] (options)
knife role run_list set [ROLE] [ENTRIES] (options)
knife role show ROLE (options)

[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webrole.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role web_role
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
web-node
[root@ip-172-31-8-220 chef-repo]# knife node run_list add web-node "role[webrole]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
web-node:
  run_list: role[webrole]
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webrole.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role web_role
[root@ip-172-31-8-220 chef-repo]# knife bootstrap 172.31.7.128 -N web-node --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.7.128 ()' can't be established.
fingerprint is SHA256:N2j7ar6bwtgFLs9KFT9ob4GcOxdjpfJmK6LGABNLXvM.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = show version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo mkdir -p '/tmp/chef_n2oFoP'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo chown ec2-user '/tmp/chef_n2oFoP'
Bootstrapping 172.31.7.128
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo sh /tmp/chef_n2oFoP/bootstrap.sh
 [172.31.7.128] -----> Existing Chef Infra Client installation detected
 [172.31.7.128] Starting the first Chef Infra Client Client run...
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: Reading products and relationships...
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: Successfully read products and relationships
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: Missing licenses remaining: []
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: All licenses present
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] Chef Infra Client, version 18.8.11
 [172.31.7.128]
 [172.31.7.128] Patents: https://www.chef.io/patents
 [172.31.7.128]
 [172.31.7.128] Infra Phase starting
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:43:04+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.7.128] [2025-10-06T12:43:04+00:00] INFO: Platform: x86_64-linux
 [172.31.7.128] [2025-10-06T12:43:04+00:00] INFO: Chef-client pid: 4491
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: Chef-client request_id: 0fb5c04d-d3a9-468c-8d5c-d215949610d0
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] [2025-10-06T12:43:04+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:05+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.7.128] [2025-10-06T12:43:05+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Extracting run list from JSON attributes provided on command line
 [172.31.7.128] [2025-10-06T12:43:06+00:00] INFO: Setting the run_list to [] from CLI options
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Applying attributes from json file
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Platform is amazon version 2023
 [172.31.7.128] [2025-10-06T12:43:06+00:00] INFO: Run List is []
 [172.31.7.128] [2025-10-06T12:43:06+00:00] INFO: Run List expands to []
 [172.31.7.128] [2025-10-06T12:43:06+00:00] INFO: Starting Chef Infra Client Run for web-node
 [172.31.7.128] [2025-10-06T12:43:06+00:00] INFO: Running start handlers
 [172.31.7.128] [2025-10-06T12:43:06+00:00] INFO: Start handlers complete.
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] Resolving cookbooks for run list: []
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T12:43:06+00:00] INFO: Loading cookbooks []
 [172.31.7.128] Synchronizing cookbooks:
 [172.31.7.128]
 [172.31.7.128] Installing cookbook gem dependencies:
Compiling cookbooks...
[2025-10-06T12:43:06+00:00] DEBUG: Cookbooks to compile: []
 [172.31.7.128] Loading Chef InSpec profile files:
 [172.31.7.128]
 [172.31.7.128] Loading Chef InSpec input files:
 [172.31.7.128]
 [172.31.7.128] Loading Chef InSpec waiver files:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:43:06+00:00] WARN: Node web-node has an empty run list.
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] Converging 0 resources
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Converging node web-node
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Saving the current state of node web-node
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T12:43:06+00:00] INFO: Chef Infra Client Run complete in 0.630395865 seconds
 [172.31.7.128]
 [172.31.7.128] Running handlers:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:43:06+00:00] INFO: Running report handlers
 [172.31.7.128] Running handlers complete
 [172.31.7.128] [2025-10-06T12:43:06+00:00] INFO: Report handlers complete
 [172.31.7.128] Infra Phase complete, 0/0 resources updated in 02 seconds
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.7.128] [2025-10-06T12:43:06+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
WARNING:
       +---------------------------------------------------------------------------------------------------------------------+
         To ensure uninterrupted downloads of Infra Client, Knife Bootstrap will soon require a license key.

         Here's what you need to know:
           * Adding a License: Use the < knife license > command to easily add a license key.
           * For Commercial Customers: Obtain your license key from the customer portal.
           * For Free/Trial Users: Non-commercial users can generate a license key from https://www.chef.io/license-generation-free-trial

         No action is require at this time, but please prepare for this change.
       +---------------------------------------------------------------------------------------------------------------------+
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo rm -f "/tmp/chef_n2oFoP/bootstrap.sh"
[root@ip-172-31-8-220 chef-repo]# ls roles/webrole.rb
roles/webrole.rb
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd roles
[root@ip-172-31-8-220 roles]# ls
starter.rb  webrole.rb
[root@ip-172-31-8-220 roles]# cat webrole.rb







name "web_role"
description "Implement web server on nodes"
run_list "recipe[webserver]"
[root@ip-172-31-8-220 roles]# vi webrole.rb
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webrole
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: Could not find or open file 'roles/webrole' in current directory or in 'roles/roles/webrole'
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webrole.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role webrole
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
web-node
[root@ip-172-31-8-220 chef-repo]# knife node run_list add web-node "role[webrole]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
web-node:
  run_list: role[webrole]
[root@ip-172-31-8-220 chef-repo]# cd cookbooks/
[root@ip-172-31-8-220 cookbooks]# ls
chefignore  starter  webserver
[root@ip-172-31-8-220 cookbooks]# tree
.
├── chefignore
├── starter
│   ├── attributes
│   │   └── default.rb
│   ├── files
│   │   └── default
│   │       └── sample.txt
│   ├── metadata.rb
│   ├── recipes
│   │   └── default.rb
│   └── templates
│       └── default
│           └── sample.erb
└── webserver
    ├── CHANGELOG.md
    ├── LICENSE
    ├── Policyfile.rb
    ├── README.md
    ├── automate.rb
    ├── chefignore
    ├── compliance
    │   ├── README.md
    │   ├── inputs
    │   ├── profiles
    │   └── waivers
    ├── kitchen.yml
    ├── metadata.rb
    ├── recipes
    │   ├── autoupdate.rb
    │   ├── default.rb
    │   └── webserver.rb
    ├── spec
    │   ├── spec_helper.rb
    │   └── unit
    │       └── recipes
    │           ├── autoupdate_spec.rb
    │           └── webserver_spec.rb
    └── test
        └── integration
            └── default
                ├── autoupdate_test.rb
                ├── default_test.rb
                └── webserver_test.rb

19 directories, 24 files
[root@ip-172-31-8-220 cookbooks]# rm webserver/recipes/autoupdate.rb
rm: remove regular file 'webserver/recipes/autoupdate.rb'?
[root@ip-172-31-8-220 cookbooks]# tree
.
├── chefignore
├── starter
│   ├── attributes
│   │   └── default.rb
│   ├── files
│   │   └── default
│   │       └── sample.txt
│   ├── metadata.rb
│   ├── recipes
│   │   └── default.rb
│   └── templates
│       └── default
│           └── sample.erb
└── webserver
    ├── CHANGELOG.md
    ├── LICENSE
    ├── Policyfile.rb
    ├── README.md
    ├── automate.rb
    ├── chefignore
    ├── compliance
    │   ├── README.md
    │   ├── inputs
    │   ├── profiles
    │   └── waivers
    ├── kitchen.yml
    ├── metadata.rb
    ├── recipes
    │   ├── autoupdate.rb
    │   ├── default.rb
    │   └── webserver.rb
    ├── spec
    │   ├── spec_helper.rb
    │   └── unit
    │       └── recipes
    │           ├── autoupdate_spec.rb
    │           └── webserver_spec.rb
    └── test
        └── integration
            └── default
                ├── autoupdate_test.rb
                ├── default_test.rb
                └── webserver_test.rb

19 directories, 24 files
[root@ip-172-31-8-220 cookbooks]# rm -rf webserver/recipes/autoupdate.rb
[root@ip-172-31-8-220 cookbooks]# tree
.
├── chefignore
├── starter
│   ├── attributes
│   │   └── default.rb
│   ├── files
│   │   └── default
│   │       └── sample.txt
│   ├── metadata.rb
│   ├── recipes
│   │   └── default.rb
│   └── templates
│       └── default
│           └── sample.erb
└── webserver
    ├── CHANGELOG.md
    ├── LICENSE
    ├── Policyfile.rb
    ├── README.md
    ├── automate.rb
    ├── chefignore
    ├── compliance
    │   ├── README.md
    │   ├── inputs
    │   ├── profiles
    │   └── waivers
    ├── kitchen.yml
    ├── metadata.rb
    ├── recipes
    │   ├── default.rb
    │   └── webserver.rb
    ├── spec
    │   ├── spec_helper.rb
    │   └── unit
    │       └── recipes
    │           ├── autoupdate_spec.rb
    │           └── webserver_spec.rb
    └── test
        └── integration
            └── default
                ├── autoupdate_test.rb
                ├── default_test.rb
                └── webserver_test.rb

19 directories, 23 files
[root@ip-172-31-8-220 cookbooks]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webrole
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: Could not find or open file 'roles/webrole' in current directory or in 'roles/roles/webrole'
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webrole.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role webrole
[root@ip-172-31-8-220 chef-repo]# knife node run_list add wed-node "role[webrole]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: The object you are looking for could not be found
Response: node 'wed-node' not found
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
web-node
[root@ip-172-31-8-220 chef-repo]# knife node run_list add wed-node "role[webrole]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: The object you are looking for could not be found
Response: node 'wed-node' not found
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife bootstrap 172.31.7.128 -N web-node --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.7.128 ()' can't be established.
fingerprint is SHA256:N2j7ar6bwtgFLs9KFT9ob4GcOxdjpfJmK6LGABNLXvM.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = show version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo mkdir -p '/tmp/chef_QTSGdB'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo chown ec2-user '/tmp/chef_QTSGdB'
Bootstrapping 172.31.7.128
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo sh /tmp/chef_QTSGdB/bootstrap.sh
 [172.31.7.128] -----> Existing Chef Infra Client installation detected
 [172.31.7.128] Starting the first Chef Infra Client Client run...
 [172.31.7.128] [2025-10-06T13:02:30+00:00] DEBUG: Reading products and relationships...
 [172.31.7.128] [2025-10-06T13:02:30+00:00] DEBUG: Successfully read products and relationships
 [172.31.7.128] [2025-10-06T13:02:30+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.7.128] [2025-10-06T13:02:30+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
 [172.31.7.128] [2025-10-06T13:02:30+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
 [172.31.7.128] [2025-10-06T13:02:30+00:00] DEBUG: Missing licenses remaining: []
 [172.31.7.128] [2025-10-06T13:02:30+00:00] DEBUG: All licenses present
 [172.31.7.128] [2025-10-06T13:02:30+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] Chef Infra Client, version 18.8.11
 [172.31.7.128]
 [172.31.7.128] Patents: https://www.chef.io/patents
 [172.31.7.128]
 [172.31.7.128] Infra Phase starting
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:02:30+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.7.128] [2025-10-06T13:02:30+00:00] INFO: Platform: x86_64-linux
 [172.31.7.128] [2025-10-06T13:02:30+00:00] INFO: Chef-client pid: 5718
 [172.31.7.128] [2025-10-06T13:02:30+00:00] DEBUG: Chef-client request_id: 3af8bbbd-2629-4162-9331-d3405e2e8245
 [172.31.7.128] [2025-10-06T13:02:30+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:02:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:32+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: Extracting run list from JSON attributes provided on command line
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Setting the run_list to [] from CLI options
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: Applying attributes from json file
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: Platform is amazon version 2023
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Run List is []
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Run List expands to []
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Starting Chef Infra Client Run for web-node
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Running start handlers
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Start handlers complete.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] Resolving cookbooks for run list: []
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:32+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Loading cookbooks []
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/CHANGELOG.md from the cache; its cookbook is no longer needed on this client.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/LICENSE from the cache; its cookbook is no longer needed on this client.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/README.md from the cache; its cookbook is no longer needed on this client.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/automate.rb from the cache; its cookbookis no longer needed on this client.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/chefignore from the cache; its cookbook is no longer needed on this client.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/compliance/README.md from the cache; itscookbook is no longer needed on this client.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/metadata.json from the cache; its cookbook is no longer needed on this client.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/metadata.rb from the cache; its cookbookis no longer needed on this client.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/recipes/autoupdate.rb from the cache; its cookbook is no longer needed on this client.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/recipes/default.rb from the cache; its cookbook is no longer needed on this client.
 [172.31.7.128] [2025-10-06T13:02:32+00:00] INFO: Removing cookbooks/webserver/recipes/webserver.rb from the cache; itscookbook is no longer needed on this client.
 [172.31.7.128] Synchronizing cookbooks:
 [172.31.7.128]
 [172.31.7.128] Installing cookbook gem dependencies:
Compiling cookbooks...
[2025-10-06T13:02:32+00:00] DEBUG: Cookbooks to compile: []
 [172.31.7.128] Loading Chef InSpec profile files:
 [172.31.7.128]
 [172.31.7.128] Loading Chef InSpec input files:
 [172.31.7.128]
 [172.31.7.128] Loading Chef InSpec waiver files:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:02:33+00:00] WARN: Node web-node has an empty run list.
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] Converging 0 resources
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: Converging node web-node
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: Saving the current state of node web-node
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:02:33+00:00] INFO: Chef Infra Client Run complete in 0.60368488 seconds
 [172.31.7.128]
 [172.31.7.128] Running handlers:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:02:33+00:00] INFO: Running report handlers
 [172.31.7.128] Running handlers complete
 [172.31.7.128] [2025-10-06T13:02:33+00:00] INFO: Report handlers complete
 [172.31.7.128] Infra Phase complete, 0/0 resources updated in 02 seconds
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.7.128] [2025-10-06T13:02:33+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
WARNING:
       +---------------------------------------------------------------------------------------------------------------------+
         To ensure uninterrupted downloads of Infra Client, Knife Bootstrap will soon require a license key.

         Here's what you need to know:
           * Adding a License: Use the < knife license > command to easily add a license key.
           * For Commercial Customers: Obtain your license key from the customer portal.
           * For Free/Trial Users: Non-commercial users can generate a license key from https://www.chef.io/license-generation-free-trial

         No action is require at this time, but please prepare for this change.
       +---------------------------------------------------------------------------------------------------------------------+
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo rm -f "/tmp/chef_QTSGdB/bootstrap.sh"
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
web-node
[root@ip-172-31-8-220 chef-repo]# knife node run_list add web-node "role[webrole]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
web-node:
  run_list: role[webrole]
[root@ip-172-31-8-220 chef-repo]# knife node delete web-node
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Do you really want to delete web-node? (Y/N) y
Deleted node[web-node]
[root@ip-172-31-8-220 chef-repo]# knife client delete web-node
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Do you really want to delete web-node? (Y/N) y
Deleted client[web-node]
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb

[root@ip-172-31-8-220 chef-repo]#
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# knife role delete webrole
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Do you really want to delete webrole? (Y/N) y
Deleted role[webrole]
[root@ip-172-31-8-220 chef-repo]# knife role create webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: RuntimeError: Please set EDITOR environment variable. See https://docs.chef.io/workstation/knife_setup/#setting-your-text-editor for details.
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# ls
starter.rb  webrole.rb
[root@ip-172-31-8-220 roles]# ls
starter.rb  webrole.rb
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife role delete webrole.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Do you really want to delete webrole.rb? (Y/N) y
ERROR: The object you are looking for could not be found
Response: Cannot load role webrole.rb
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# ls
starter.rb  webrole.rb
[root@ip-172-31-8-220 roles]# knife role delete webrole.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Do you really want to delete webrole.rb? (Y/N) y
ERROR: The object you are looking for could not be found
Response: Cannot load role webrole.rb
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd .chef/
[root@ip-172-31-8-220 .chef]# ls
chef_guid  config.rb  dropmail-validator.pem  gaurav.pem  syntaxcache  trusted_certs
[root@ip-172-31-8-220 .chef]# knife role delete webrole.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Do you really want to delete webrole.rb? (Y/N) y
ERROR: The object you are looking for could not be found
Response: Cannot load role webrole.rb
[root@ip-172-31-8-220 .chef]# cd ..
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# ls
starter.rb  webrole.rb
[root@ip-172-31-8-220 roles]# rm -rf webrole.rb
[root@ip-172-31-8-220 roles]# ls
starter.rb
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife role create webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: Chef::Exceptions::ValidationFailed: Property name's value webserver.rb does not match regular expression /^[\-[:alnum:]_]+$/
[root@ip-172-31-8-220 chef-repo]# knife role create webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: RuntimeError: Please set EDITOR environment variable. See https://docs.chef.io/workstation/knife_setup/#setting-your-text-editor for details.
[root@ip-172-31-8-220 chef-repo]# EDITOR=vi knife role create webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Created role[webserver]
[root@ip-172-31-8-220 chef-repo]# cat webserver
cat: webserver: No such file or directory
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# ls
starter.rb
[root@ip-172-31-8-220 roles]# ls -a
.  ..  starter.rb
[root@ip-172-31-8-220 roles]# knife role list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
web_role
webserver
[root@ip-172-31-8-220 roles]# ls
starter.rb
[root@ip-172-31-8-220 roles]# cat starter.rb
name "starter"
description "An example Chef role"
run_list "recipe[starter]"
override_attributes({
  "starter_name" => "Gaurav Upadhayay",
})
[root@ip-172-31-8-220 roles]# ls
starter.rb
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# knife role list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
web_role
webserver
[root@ip-172-31-8-220 chef-repo]# knife role delete web_role
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Do you really want to delete web_role? (Y/N) y
Deleted role[web_role]
[root@ip-172-31-8-220 chef-repo]# knife role list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webserver
[root@ip-172-31-8-220 chef-repo]# EDITOR=vi knife role create webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Created role[webserver]
[root@ip-172-31-8-220 chef-repo]# knife role delete  webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Do you really want to delete webserver? (Y/N) y
Deleted role[webserver]
[root@ip-172-31-8-220 chef-repo]# knife role list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb

[root@ip-172-31-8-220 chef-repo]#
[root@ip-172-31-8-220 chef-repo]# tree
.
├── README.md
├── cookbooks
│   ├── chefignore
│   ├── starter
│   │   ├── attributes
│   │   │   └── default.rb
│   │   ├── files
│   │   │   └── default
│   │   │       └── sample.txt
│   │   ├── metadata.rb
│   │   ├── recipes
│   │   │   └── default.rb
│   │   └── templates
│   │       └── default
│   │           └── sample.erb
│   └── webserver
│       ├── CHANGELOG.md
│       ├── LICENSE
│       ├── Policyfile.rb
│       ├── README.md
│       ├── automate.rb
│       ├── chefignore
│       ├── compliance
│       │   ├── README.md
│       │   ├── inputs
│       │   ├── profiles
│       │   └── waivers
│       ├── kitchen.yml
│       ├── metadata.rb
│       ├── recipes
│       │   ├── default.rb
│       │   └── webserver.rb
│       ├── spec
│       │   ├── spec_helper.rb
│       │   └── unit
│       │       └── recipes
│       │           ├── autoupdate_spec.rb
│       │           └── webserver_spec.rb
│       └── test
│           └── integration
│               └── default
│                   ├── autoupdate_test.rb
│                   ├── default_test.rb
│                   └── webserver_test.rb
├── id_rsa.pem
└── roles
    └── starter.rb

21 directories, 26 files
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# nano webserver.rb
[root@ip-172-31-8-220 roles]# ls
starter.rb  webserver.rb
[root@ip-172-31-8-220 roles]# cat webserver.rb
name "webserver"
description "Role to configure webserver"
run_list(
  "recipe[webserver]"
)
[root@ip-172-31-8-220 roles]# vi webserver.rb
[root@ip-172-31-8-220 roles]#
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb

[root@ip-172-31-8-220 chef-repo]# lsclient_loop: send disconnect: Connection reset
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac>
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac>
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac>
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac>
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac>
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac>
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac>
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac>
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac>
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac> ssh -i .\id_rsa ec2-user@43.204.145.143

A newer release of "Amazon Linux" is available.
  Version 2023.8.20250908:
  Version 2023.8.20250915:
  Version 2023.9.20250929:
Run "/usr/bin/dnf check-release-update" for full release and version update info
   ,     #_
   ~\_  ####_        Amazon Linux 2023
  ~~  \_#####\
  ~~     \###|
  ~~       \#/ ___   https://aws.amazon.com/linux/amazon-linux-2023
   ~~       V~' '->
    ~~~         /
      ~~._.   _/
         _/ _/
       _/m/'
Last login: Mon Oct  6 12:19:17 2025 from 103.146.111.77
[ec2-user@ip-172-31-8-220 ~]$ sudo su
[root@ip-172-31-8-220 ec2-user]#
[root@ip-172-31-8-220 ec2-user]# ls
chef-repo
[root@ip-172-31-8-220 ec2-user]# cd chef-repo/
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# knife bootstrap 172.31.7.128 -N webnode --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.7.128 ()' can't be established.
fingerprint is SHA256:N2j7ar6bwtgFLs9KFT9ob4GcOxdjpfJmK6LGABNLXvM.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = show version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo mkdir -p '/tmp/chef_o1Jlzj'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo chown ec2-user '/tmp/chef_o1Jlzj'
Bootstrapping 172.31.7.128
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo sh /tmp/chef_o1Jlzj/bootstrap.sh
 [172.31.7.128] -----> Existing Chef Infra Client installation detected
 [172.31.7.128] Starting the first Chef Infra Client Client run...
 [172.31.7.128] [2025-10-06T13:30:55+00:00] DEBUG: Reading products and relationships...
 [172.31.7.128] [2025-10-06T13:30:55+00:00] DEBUG: Successfully read products and relationships
 [172.31.7.128] [2025-10-06T13:30:55+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.7.128] [2025-10-06T13:30:55+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
 [172.31.7.128] [2025-10-06T13:30:55+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
 [172.31.7.128] [2025-10-06T13:30:55+00:00] DEBUG: Missing licenses remaining: []
 [172.31.7.128] [2025-10-06T13:30:55+00:00] DEBUG: All licenses present
 [172.31.7.128] [2025-10-06T13:30:55+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] Chef Infra Client, version 18.8.11
 [172.31.7.128]
 [172.31.7.128] Patents: https://www.chef.io/patents
 [172.31.7.128]
 [172.31.7.128] Infra Phase starting
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:30:55+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.7.128] [2025-10-06T13:30:55+00:00] INFO: Platform: x86_64-linux
 [172.31.7.128] [2025-10-06T13:30:55+00:00] INFO: Chef-client pid: 7118
 [172.31.7.128] [2025-10-06T13:30:55+00:00] DEBUG: Chef-client request_id: 2c23c8aa-329a-446a-ad85-7f3b70dc7efd
 [172.31.7.128] [2025-10-06T13:30:55+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:30:56+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:57+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128]
 [172.31.7.128] ================================================================================
 [172.31.7.128]
 [172.31.7.128] Chef Infra Client encountered an error attempting to load the node data for "webnode"
 [172.31.7.128]
 [172.31.7.128] ================================================================================
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Authentication Error:
 [172.31.7.128]
 [172.31.7.128] ---------------------
 [172.31.7.128]
 [172.31.7.128] Failed to authenticate to the chef server (http 401).
 [172.31.7.128]
 [172.31.7.128] Server Response:
 [172.31.7.128]
 [172.31.7.128] ----------------
 [172.31.7.128]
 [172.31.7.128] Failed to authenticate as 'webnode'. Ensure that your node_name and client key are correct.
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Relevant Config Settings:
 [172.31.7.128]
 [172.31.7.128] -------------------------
 [172.31.7.128]
 [172.31.7.128] chef_server_url   "https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail"
 [172.31.7.128] node_name         "webnode"
 [172.31.7.128] client_key        "/etc/chef/client.pem"
 [172.31.7.128]
 [172.31.7.128] If these settings are correct, your client_key may be invalid, or
 [172.31.7.128] you may have a chef user with the same client name as this node.
 [172.31.7.128]
 [172.31.7.128] System Info:
 [172.31.7.128]
 [172.31.7.128] ------------
 [172.31.7.128]
 [172.31.7.128] chef_version=18.8.11
 [172.31.7.128] ruby=ruby 3.1.7p261 (2025-03-26 revision 0a3704f218) [x86_64-linux]
 [172.31.7.128] program_name=/usr/bin/chef-client
 [172.31.7.128] executable=/opt/chef/bin/chef-client
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Running handlers:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:30:57+00:00] ERROR: Running exception handlers
 [172.31.7.128] Running handlers complete
 [172.31.7.128] [2025-10-06T13:30:57+00:00] ERROR: Exception handlers complete
 [172.31.7.128] Infra Phase failed. 0 resources updated in 01 seconds
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T13:30:57+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
 [172.31.7.128] [2025-10-06T13:30:57+00:00] FATAL: ---------------------------------------------------------------------------------------
 [172.31.7.128] [2025-10-06T13:30:57+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
 [172.31.7.128] [2025-10-06T13:30:57+00:00] FATAL: ---------------------------------------------------------------------------------------
 [172.31.7.128] [2025-10-06T13:30:57+00:00] DEBUG: Net::HTTPClientException: 401 "Unauthorized"
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/net-http-0.6.0/lib/net/http/response.rb:277:in `error!'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:159:in `request'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:122:in `get'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:653:in `load'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:636:in `find_or_create'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/policy_builder/dynamic.rb:74:in `load_node'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:450:in `load_node'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:281:in `run'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:305:in `run_with_graceful_exit_option'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:281:in `block in run_chef_client'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/local_mode.rb:42:in `with_server_connectivity'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:264:in `run_chef_client'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application/base.rb:354:in `run_application'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:67:in `run'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-bin-18.8.11/bin/chef-client:25:in `<top (required)>'
/usr/bin/chef-client:193:in `load'
/usr/bin/chef-client:193:in `<main>'
 [172.31.7.128] [2025-10-06T13:30:57+00:00] FATAL: Net::HTTPClientException: 401 "Unauthorized"
ERROR: The following error occurred on 172.31.7.128:
ERROR: -----> Existing Chef Infra Client installation detected
     Starting the first Chef Infra Client Client run...
     [2025-10-06T13:30:55+00:00] DEBUG: Reading products and relationships...
     [2025-10-06T13:30:55+00:00] DEBUG: Successfully read products and relationships
     [2025-10-06T13:30:55+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
     [2025-10-06T13:30:55+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
     [2025-10-06T13:30:55+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
     [2025-10-06T13:30:55+00:00] DEBUG: Missing licenses remaining: []
     [2025-10-06T13:30:55+00:00] DEBUG: All licenses present
     [2025-10-06T13:30:55+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
     Chef Infra Client, version 18.8.11
     Patents: https://www.chef.io/patents
     Infra Phase starting
     [2025-10-06T13:30:55+00:00] INFO: *** Chef Infra Client 18.8.11 ***
     [2025-10-06T13:30:55+00:00] INFO: Platform: x86_64-linux
     [2025-10-06T13:30:55+00:00] INFO: Chef-client pid: 7118
     [2025-10-06T13:30:55+00:00] DEBUG: Chef-client request_id: 2c23c8aa-329a-446a-ad85-7f3b70dc7efd
     [2025-10-06T13:30:55+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
     [2025-10-06T13:30:56+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
     rx-checksumming: on [fixed]
     tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
     scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
     tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
     generic-segmentation-offload: on
     generic-receive-offload: on
     large-receive-offload: off [fixed]
     rx-vlan-offload: off [fixed]
     tx-vlan-offload: off [fixed]
     ntuple-filters: off [fixed]
     receive-hashing: off [fixed]
     highdma: off [fixed]
     rx-vlan-filter: off [fixed]
     vlan-challenged: off [fixed]
     tx-lockless: off [fixed]
     netns-local: off [fixed]
     tx-gso-robust: on [fixed]
     tx-fcoe-segmentation: off [fixed]
     tx-gre-segmentation: off [fixed]
     tx-gre-csum-segmentation: off [fixed]
     tx-ipxip4-segmentation: off [fixed]
     tx-ipxip6-segmentation: off [fixed]
     tx-udp_tnl-segmentation: off [fixed]
     tx-udp_tnl-csum-segmentation: off [fixed]
     tx-gso-partial: off [fixed]
     tx-tunnel-remcsum-segmentation: off [fixed]
     tx-sctp-segmentation: off [fixed]
     tx-esp-segmentation: off [fixed]
     tx-udp-segmentation: off [fixed]
     tx-gso-list: off [fixed]
     fcoe-mtu: off [fixed]
     tx-nocache-copy: off
     loopback: off [fixed]
     rx-fcs: off [fixed]
     rx-all: off [fixed]
     tx-vlan-stag-hw-insert: off [fixed]
     rx-vlan-stag-hw-parse: off [fixed]
     rx-vlan-stag-filter: off [fixed]
     l2-fwd-offload: off [fixed]
     hw-tc-offload: off [fixed]
     esp-hw-offload: off [fixed]
     esp-tx-csum-hw-offload: off [fixed]
     rx-udp_tunnel-port-offload: off [fixed]
     tls-hw-tx-offload: off [fixed]
     tls-hw-rx-offload: off [fixed]
     rx-gro-hw: off [fixed]
     tls-hw-record: off [fixed]
     rx-gro-list: off
     macsec-hw-offload: off [fixed]
     rx-udp-gro-forwarding: off
     hsr-tag-ins-offload: off [fixed]
     hsr-tag-rm-offload: off [fixed]
     hsr-fwd-offload: off [fixed]
     hsr-dup-offload: off [fixed]

     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:56+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:30:56+00:00] DEBUG: opened
     [2025-10-06T13:30:57+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
     [2025-10-06T13:30:57+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
     [2025-10-06T13:30:57+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:30:57+00:00] DEBUG: opened
     [2025-10-06T13:30:57+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:30:57+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384

     ================================================================================
     Chef Infra Client encountered an error attempting to load the node data for "webnode"
     ================================================================================

     Authentication Error:
     ---------------------
     Failed to authenticate to the chef server (http 401).

     Server Response:
     ----------------
     Failed to authenticate as 'webnode'. Ensure that your node_name and client key are correct.

     Relevant Config Settings:
     -------------------------
     chef_server_url   "https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail"
     node_name         "webnode"
     client_key        "/etc/chef/client.pem"

     If these settings are correct, your client_key may be invalid, or
     you may have a chef user with the same client name as this node.

     System Info:
     ------------
     chef_version=18.8.11
     ruby=ruby 3.1.7p261 (2025-03-26 revision 0a3704f218) [x86_64-linux]
     program_name=/usr/bin/chef-client
     executable=/opt/chef/bin/chef-client


     Running handlers:
     [2025-10-06T13:30:57+00:00] ERROR: Running exception handlers
     Running handlers complete
     [2025-10-06T13:30:57+00:00] ERROR: Exception handlers complete
     Infra Phase failed. 0 resources updated in 01 seconds
     [2025-10-06T13:30:57+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:30:57+00:00] DEBUG: opened
     [2025-10-06T13:30:57+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:30:57+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
     [2025-10-06T13:30:57+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
     [2025-10-06T13:30:57+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:30:57+00:00] DEBUG: opened
     [2025-10-06T13:30:57+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:30:57+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
     [2025-10-06T13:30:57+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
     [2025-10-06T13:30:57+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
     [2025-10-06T13:30:57+00:00] FATAL: ---------------------------------------------------------------------------------------
     [2025-10-06T13:30:57+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
     [2025-10-06T13:30:57+00:00] FATAL: ---------------------------------------------------------------------------------------
     [2025-10-06T13:30:57+00:00] DEBUG: Net::HTTPClientException: 401 "Unauthorized"
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/net-http-0.6.0/lib/net/http/response.rb:277:in `error!'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:159:in `request'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:122:in `get'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:653:in `load'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:636:in `find_or_create'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/policy_builder/dynamic.rb:74:in `load_node'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:450:in `load_node'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:281:in `run'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:305:in `run_with_graceful_exit_option'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:281:in `block in run_chef_client'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/local_mode.rb:42:in `with_server_connectivity'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:264:in `run_chef_client'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application/base.rb:354:in `run_application'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:67:in `run'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-bin-18.8.11/bin/chef-client:25:in `<top (required)>'
     /usr/bin/chef-client:193:in `load'
     /usr/bin/chef-client:193:in `<main>'
     [2025-10-06T13:30:57+00:00] FATAL: Net::HTTPClientException: 401 "Unauthorized"
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo rm -f "/tmp/chef_o1Jlzj/bootstrap.sh"
[root@ip-172-31-8-220 chef-repo]# knofe node list
bash: knofe: command not found
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb

[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb

[root@ip-172-31-8-220 chef-repo]#
[root@ip-172-31-8-220 chef-repo]# knife bootstrap 172.31.7.128 -N webnode --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.7.128 ()' can't be established.
fingerprint is SHA256:N2j7ar6bwtgFLs9KFT9ob4GcOxdjpfJmK6LGABNLXvM.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = show version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo mkdir -p '/tmp/chef_MQf39T'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo chown ec2-user '/tmp/chef_MQf39T'
Bootstrapping 172.31.7.128
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo sh /tmp/chef_MQf39T/bootstrap.sh
 [172.31.7.128] -----> Existing Chef Infra Client installation detected
 [172.31.7.128] Starting the first Chef Infra Client Client run...
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: Reading products and relationships...
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: Successfully read products and relationships
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: Missing licenses remaining: []
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: All licenses present
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] Chef Infra Client, version 18.8.11
 [172.31.7.128]
 [172.31.7.128] Patents: https://www.chef.io/patents
 [172.31.7.128]
 [172.31.7.128] Infra Phase starting
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:33:15+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.7.128] [2025-10-06T13:33:15+00:00] INFO: Platform: x86_64-linux
 [172.31.7.128] [2025-10-06T13:33:15+00:00] INFO: Chef-client pid: 7655
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: Chef-client request_id: f3fcdfc2-c2b6-49c2-b11c-5800d4e3de92
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] [2025-10-06T13:33:15+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:33:16+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:16+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128]
 [172.31.7.128] ================================================================================
 [172.31.7.128]
 [172.31.7.128] Chef Infra Client encountered an error attempting to load the node data for "webnode"
 [172.31.7.128]
 [172.31.7.128] ================================================================================
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Authentication Error:
 [172.31.7.128]
 [172.31.7.128] ---------------------
 [172.31.7.128]
 [172.31.7.128] Failed to authenticate to the chef server (http 401).
 [172.31.7.128]
 [172.31.7.128] Server Response:
 [172.31.7.128]
 [172.31.7.128] ----------------
 [172.31.7.128]
 [172.31.7.128] Failed to authenticate as 'webnode'. Ensure that your node_name and client key are correct.
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Relevant Config Settings:
 [172.31.7.128]
 [172.31.7.128] -------------------------
 [172.31.7.128]
 [172.31.7.128] chef_server_url   "https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail"
 [172.31.7.128] node_name         "webnode"
 [172.31.7.128] client_key        "/etc/chef/client.pem"
 [172.31.7.128]
 [172.31.7.128] If these settings are correct, your client_key may be invalid, or
 [172.31.7.128] you may have a chef user with the same client name as this node.
 [172.31.7.128]
 [172.31.7.128] System Info:
 [172.31.7.128]
 [172.31.7.128] ------------
 [172.31.7.128]
 [172.31.7.128] chef_version=18.8.11
 [172.31.7.128] ruby=ruby 3.1.7p261 (2025-03-26 revision 0a3704f218) [x86_64-linux]
 [172.31.7.128] program_name=/usr/bin/chef-client
 [172.31.7.128] executable=/opt/chef/bin/chef-client
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Running handlers:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:33:17+00:00] ERROR: Running exception handlers
 [172.31.7.128] Running handlers complete
 [172.31.7.128] [2025-10-06T13:33:17+00:00] ERROR: Exception handlers complete
 [172.31.7.128] Infra Phase failed. 0 resources updated in 01 seconds
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T13:33:17+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
 [172.31.7.128] [2025-10-06T13:33:17+00:00] FATAL: ---------------------------------------------------------------------------------------
 [172.31.7.128] [2025-10-06T13:33:17+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
 [172.31.7.128] [2025-10-06T13:33:17+00:00] FATAL: ---------------------------------------------------------------------------------------
 [172.31.7.128] [2025-10-06T13:33:17+00:00] DEBUG: Net::HTTPClientException: 401 "Unauthorized"
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/net-http-0.6.0/lib/net/http/response.rb:277:in `error!'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:159:in `request'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:122:in `get'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:653:in `load'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:636:in `find_or_create'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/policy_builder/dynamic.rb:74:in `load_node'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:450:in `load_node'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:281:in `run'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:305:in `run_with_graceful_exit_option'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:281:in `block in run_chef_client'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/local_mode.rb:42:in `with_server_connectivity'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:264:in `run_chef_client'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application/base.rb:354:in `run_application'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:67:in `run'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-bin-18.8.11/bin/chef-client:25:in `<top (required)>'
/usr/bin/chef-client:193:in `load'
/usr/bin/chef-client:193:in `<main>'
 [172.31.7.128] [2025-10-06T13:33:17+00:00] FATAL: Net::HTTPClientException: 401 "Unauthorized"
ERROR: The following error occurred on 172.31.7.128:
ERROR: -----> Existing Chef Infra Client installation detected
     Starting the first Chef Infra Client Client run...
     [2025-10-06T13:33:15+00:00] DEBUG: Reading products and relationships...
     [2025-10-06T13:33:15+00:00] DEBUG: Successfully read products and relationships
     [2025-10-06T13:33:15+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
     [2025-10-06T13:33:15+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
     [2025-10-06T13:33:15+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
     [2025-10-06T13:33:15+00:00] DEBUG: Missing licenses remaining: []
     [2025-10-06T13:33:15+00:00] DEBUG: All licenses present
     [2025-10-06T13:33:15+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
     Chef Infra Client, version 18.8.11
     Patents: https://www.chef.io/patents
     Infra Phase starting
     [2025-10-06T13:33:15+00:00] INFO: *** Chef Infra Client 18.8.11 ***
     [2025-10-06T13:33:15+00:00] INFO: Platform: x86_64-linux
     [2025-10-06T13:33:15+00:00] INFO: Chef-client pid: 7655
     [2025-10-06T13:33:15+00:00] DEBUG: Chef-client request_id: f3fcdfc2-c2b6-49c2-b11c-5800d4e3de92
     [2025-10-06T13:33:15+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
     [2025-10-06T13:33:15+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
     rx-checksumming: on [fixed]
     tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
     scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
     tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
     generic-segmentation-offload: on
     generic-receive-offload: on
     large-receive-offload: off [fixed]
     rx-vlan-offload: off [fixed]
     tx-vlan-offload: off [fixed]
     ntuple-filters: off [fixed]
     receive-hashing: off [fixed]
     highdma: off [fixed]
     rx-vlan-filter: off [fixed]
     vlan-challenged: off [fixed]
     tx-lockless: off [fixed]
     netns-local: off [fixed]
     tx-gso-robust: on [fixed]
     tx-fcoe-segmentation: off [fixed]
     tx-gre-segmentation: off [fixed]
     tx-gre-csum-segmentation: off [fixed]
     tx-ipxip4-segmentation: off [fixed]
     tx-ipxip6-segmentation: off [fixed]
     tx-udp_tnl-segmentation: off [fixed]
     tx-udp_tnl-csum-segmentation: off [fixed]
     tx-gso-partial: off [fixed]
     tx-tunnel-remcsum-segmentation: off [fixed]
     tx-sctp-segmentation: off [fixed]
     tx-esp-segmentation: off [fixed]
     tx-udp-segmentation: off [fixed]
     tx-gso-list: off [fixed]
     fcoe-mtu: off [fixed]
     tx-nocache-copy: off
     loopback: off [fixed]
     rx-fcs: off [fixed]
     rx-all: off [fixed]
     tx-vlan-stag-hw-insert: off [fixed]
     rx-vlan-stag-hw-parse: off [fixed]
     rx-vlan-stag-filter: off [fixed]
     l2-fwd-offload: off [fixed]
     hw-tc-offload: off [fixed]
     esp-hw-offload: off [fixed]
     esp-tx-csum-hw-offload: off [fixed]
     rx-udp_tunnel-port-offload: off [fixed]
     tls-hw-tx-offload: off [fixed]
     tls-hw-rx-offload: off [fixed]
     rx-gro-hw: off [fixed]
     tls-hw-record: off [fixed]
     rx-gro-list: off
     macsec-hw-offload: off [fixed]
     rx-udp-gro-forwarding: off
     hsr-tag-ins-offload: off [fixed]
     hsr-tag-rm-offload: off [fixed]
     hsr-fwd-offload: off [fixed]
     hsr-dup-offload: off [fixed]

     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:33:16+00:00] DEBUG: opened
     [2025-10-06T13:33:16+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
     [2025-10-06T13:33:17+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
     [2025-10-06T13:33:17+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:33:17+00:00] DEBUG: opened
     [2025-10-06T13:33:17+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:33:17+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384

     ================================================================================
     Chef Infra Client encountered an error attempting to load the node data for "webnode"
     ================================================================================

     Authentication Error:
     ---------------------
     Failed to authenticate to the chef server (http 401).

     Server Response:
     ----------------
     Failed to authenticate as 'webnode'. Ensure that your node_name and client key are correct.

     Relevant Config Settings:
     -------------------------
     chef_server_url   "https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail"
     node_name         "webnode"
     client_key        "/etc/chef/client.pem"

     If these settings are correct, your client_key may be invalid, or
     you may have a chef user with the same client name as this node.

     System Info:
     ------------
     chef_version=18.8.11
     ruby=ruby 3.1.7p261 (2025-03-26 revision 0a3704f218) [x86_64-linux]
     program_name=/usr/bin/chef-client
     executable=/opt/chef/bin/chef-client


     Running handlers:
     [2025-10-06T13:33:17+00:00] ERROR: Running exception handlers
     Running handlers complete
     [2025-10-06T13:33:17+00:00] ERROR: Exception handlers complete
     Infra Phase failed. 0 resources updated in 01 seconds
     [2025-10-06T13:33:17+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:33:17+00:00] DEBUG: opened
     [2025-10-06T13:33:17+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:33:17+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
     [2025-10-06T13:33:17+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
     [2025-10-06T13:33:17+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:33:17+00:00] DEBUG: opened
     [2025-10-06T13:33:17+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:33:17+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
     [2025-10-06T13:33:17+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
     [2025-10-06T13:33:17+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
     [2025-10-06T13:33:17+00:00] FATAL: ---------------------------------------------------------------------------------------
     [2025-10-06T13:33:17+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
     [2025-10-06T13:33:17+00:00] FATAL: ---------------------------------------------------------------------------------------
     [2025-10-06T13:33:17+00:00] DEBUG: Net::HTTPClientException: 401 "Unauthorized"
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/net-http-0.6.0/lib/net/http/response.rb:277:in `error!'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:159:in `request'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:122:in `get'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:653:in `load'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:636:in `find_or_create'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/policy_builder/dynamic.rb:74:in `load_node'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:450:in `load_node'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:281:in `run'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:305:in `run_with_graceful_exit_option'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:281:in `block in run_chef_client'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/local_mode.rb:42:in `with_server_connectivity'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:264:in `run_chef_client'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application/base.rb:354:in `run_application'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:67:in `run'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-bin-18.8.11/bin/chef-client:25:in `<top (required)>'
     /usr/bin/chef-client:193:in `load'
     /usr/bin/chef-client:193:in `<main>'
     [2025-10-06T13:33:17+00:00] FATAL: Net::HTTPClientException: 401 "Unauthorized"
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo rm -f "/tmp/chef_MQf39T/bootstrap.sh"
[root@ip-172-31-8-220 chef-repo]# knife bootstrap 172.31.7.128 -N webnode --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.7.128 ()' can't be established.
fingerprint is SHA256:N2j7ar6bwtgFLs9KFT9ob4GcOxdjpfJmK6LGABNLXvM.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = show version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo mkdir -p '/tmp/chef_O14G86'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo chown ec2-user '/tmp/chef_O14G86'
Bootstrapping 172.31.7.128
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo sh /tmp/chef_O14G86/bootstrap.sh
 [172.31.7.128] -----> Existing Chef Infra Client installation detected
 [172.31.7.128] Starting the first Chef Infra Client Client run...
 [172.31.7.128] [2025-10-06T13:34:36+00:00] DEBUG: Reading products and relationships...
 [172.31.7.128] [2025-10-06T13:34:36+00:00] DEBUG: Successfully read products and relationships
 [172.31.7.128] [2025-10-06T13:34:36+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.7.128] [2025-10-06T13:34:36+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
 [172.31.7.128] [2025-10-06T13:34:36+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
 [172.31.7.128] [2025-10-06T13:34:36+00:00] DEBUG: Missing licenses remaining: []
 [172.31.7.128] [2025-10-06T13:34:36+00:00] DEBUG: All licenses present
 [172.31.7.128] [2025-10-06T13:34:36+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] Chef Infra Client, version 18.8.11
 [172.31.7.128]
 [172.31.7.128] Patents: https://www.chef.io/patents
 [172.31.7.128]
 [172.31.7.128] Infra Phase starting
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:34:36+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.7.128] [2025-10-06T13:34:36+00:00] INFO: Platform: x86_64-linux
 [172.31.7.128] [2025-10-06T13:34:36+00:00] INFO: Chef-client pid: 8134
 [172.31.7.128] [2025-10-06T13:34:36+00:00] DEBUG: Chef-client request_id: 60ef867e-85b2-40a6-9c2c-aaf981627c81
 [172.31.7.128] [2025-10-06T13:34:36+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:34:37+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:38+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128]
 [172.31.7.128] ================================================================================
 [172.31.7.128]
 [172.31.7.128] Chef Infra Client encountered an error attempting to load the node data for "webnode"
 [172.31.7.128]
 [172.31.7.128] ================================================================================
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Authentication Error:
 [172.31.7.128]
 [172.31.7.128] ---------------------
 [172.31.7.128]
 [172.31.7.128] Failed to authenticate to the chef server (http 401).
 [172.31.7.128]
 [172.31.7.128] Server Response:
 [172.31.7.128]
 [172.31.7.128] ----------------
 [172.31.7.128]
 [172.31.7.128] Failed to authenticate as 'webnode'. Ensure that your node_name and client key are correct.
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Relevant Config Settings:
 [172.31.7.128]
 [172.31.7.128] -------------------------
 [172.31.7.128]
 [172.31.7.128] chef_server_url   "https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail"
 [172.31.7.128] node_name         "webnode"
 [172.31.7.128] client_key        "/etc/chef/client.pem"
 [172.31.7.128]
 [172.31.7.128] If these settings are correct, your client_key may be invalid, or
 [172.31.7.128] you may have a chef user with the same client name as this node.
 [172.31.7.128]
 [172.31.7.128] System Info:
 [172.31.7.128]
 [172.31.7.128] ------------
 [172.31.7.128]
 [172.31.7.128] chef_version=18.8.11
 [172.31.7.128] ruby=ruby 3.1.7p261 (2025-03-26 revision 0a3704f218) [x86_64-linux]
 [172.31.7.128] program_name=/usr/bin/chef-client
 [172.31.7.128] executable=/opt/chef/bin/chef-client
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Running handlers:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:34:38+00:00] ERROR: Running exception handlers
 [172.31.7.128] Running handlers complete
 [172.31.7.128] [2025-10-06T13:34:38+00:00] ERROR: Exception handlers complete
 [172.31.7.128] Infra Phase failed. 0 resources updated in 01 seconds
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T13:34:38+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
 [172.31.7.128] [2025-10-06T13:34:38+00:00] FATAL: ---------------------------------------------------------------------------------------
 [172.31.7.128] [2025-10-06T13:34:38+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
 [172.31.7.128] [2025-10-06T13:34:38+00:00] FATAL: ---------------------------------------------------------------------------------------
 [172.31.7.128] [2025-10-06T13:34:38+00:00] DEBUG: Net::HTTPClientException: 401 "Unauthorized"
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/net-http-0.6.0/lib/net/http/response.rb:277:in `error!'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:159:in `request'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:122:in `get'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:653:in `load'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:636:in `find_or_create'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/policy_builder/dynamic.rb:74:in `load_node'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:450:in `load_node'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:281:in `run'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:305:in `run_with_graceful_exit_option'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:281:in `block in run_chef_client'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/local_mode.rb:42:in `with_server_connectivity'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:264:in `run_chef_client'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application/base.rb:354:in `run_application'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:67:in `run'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-bin-18.8.11/bin/chef-client:25:in `<top (required)>'
/usr/bin/chef-client:193:in `load'
/usr/bin/chef-client:193:in `<main>'
 [172.31.7.128] [2025-10-06T13:34:38+00:00] FATAL: Net::HTTPClientException: 401 "Unauthorized"
ERROR: The following error occurred on 172.31.7.128:
ERROR: -----> Existing Chef Infra Client installation detected
     Starting the first Chef Infra Client Client run...
     [2025-10-06T13:34:36+00:00] DEBUG: Reading products and relationships...
     [2025-10-06T13:34:36+00:00] DEBUG: Successfully read products and relationships
     [2025-10-06T13:34:36+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
     [2025-10-06T13:34:36+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
     [2025-10-06T13:34:36+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
     [2025-10-06T13:34:36+00:00] DEBUG: Missing licenses remaining: []
     [2025-10-06T13:34:36+00:00] DEBUG: All licenses present
     [2025-10-06T13:34:36+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
     Chef Infra Client, version 18.8.11
     Patents: https://www.chef.io/patents
     Infra Phase starting
     [2025-10-06T13:34:36+00:00] INFO: *** Chef Infra Client 18.8.11 ***
     [2025-10-06T13:34:36+00:00] INFO: Platform: x86_64-linux
     [2025-10-06T13:34:36+00:00] INFO: Chef-client pid: 8134
     [2025-10-06T13:34:36+00:00] DEBUG: Chef-client request_id: 60ef867e-85b2-40a6-9c2c-aaf981627c81
     [2025-10-06T13:34:36+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
     [2025-10-06T13:34:37+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
     rx-checksumming: on [fixed]
     tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
     scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
     tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
     generic-segmentation-offload: on
     generic-receive-offload: on
     large-receive-offload: off [fixed]
     rx-vlan-offload: off [fixed]
     tx-vlan-offload: off [fixed]
     ntuple-filters: off [fixed]
     receive-hashing: off [fixed]
     highdma: off [fixed]
     rx-vlan-filter: off [fixed]
     vlan-challenged: off [fixed]
     tx-lockless: off [fixed]
     netns-local: off [fixed]
     tx-gso-robust: on [fixed]
     tx-fcoe-segmentation: off [fixed]
     tx-gre-segmentation: off [fixed]
     tx-gre-csum-segmentation: off [fixed]
     tx-ipxip4-segmentation: off [fixed]
     tx-ipxip6-segmentation: off [fixed]
     tx-udp_tnl-segmentation: off [fixed]
     tx-udp_tnl-csum-segmentation: off [fixed]
     tx-gso-partial: off [fixed]
     tx-tunnel-remcsum-segmentation: off [fixed]
     tx-sctp-segmentation: off [fixed]
     tx-esp-segmentation: off [fixed]
     tx-udp-segmentation: off [fixed]
     tx-gso-list: off [fixed]
     fcoe-mtu: off [fixed]
     tx-nocache-copy: off
     loopback: off [fixed]
     rx-fcs: off [fixed]
     rx-all: off [fixed]
     tx-vlan-stag-hw-insert: off [fixed]
     rx-vlan-stag-hw-parse: off [fixed]
     rx-vlan-stag-filter: off [fixed]
     l2-fwd-offload: off [fixed]
     hw-tc-offload: off [fixed]
     esp-hw-offload: off [fixed]
     esp-tx-csum-hw-offload: off [fixed]
     rx-udp_tunnel-port-offload: off [fixed]
     tls-hw-tx-offload: off [fixed]
     tls-hw-rx-offload: off [fixed]
     rx-gro-hw: off [fixed]
     tls-hw-record: off [fixed]
     rx-gro-list: off
     macsec-hw-offload: off [fixed]
     rx-udp-gro-forwarding: off
     hsr-tag-ins-offload: off [fixed]
     hsr-tag-rm-offload: off [fixed]
     hsr-fwd-offload: off [fixed]
     hsr-dup-offload: off [fixed]

     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:37+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:34:37+00:00] DEBUG: opened
     [2025-10-06T13:34:38+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
     [2025-10-06T13:34:38+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
     [2025-10-06T13:34:38+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:34:38+00:00] DEBUG: opened
     [2025-10-06T13:34:38+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:34:38+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384

     ================================================================================
     Chef Infra Client encountered an error attempting to load the node data for "webnode"
     ================================================================================

     Authentication Error:
     ---------------------
     Failed to authenticate to the chef server (http 401).

     Server Response:
     ----------------
     Failed to authenticate as 'webnode'. Ensure that your node_name and client key are correct.

     Relevant Config Settings:
     -------------------------
     chef_server_url   "https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail"
     node_name         "webnode"
     client_key        "/etc/chef/client.pem"

     If these settings are correct, your client_key may be invalid, or
     you may have a chef user with the same client name as this node.

     System Info:
     ------------
     chef_version=18.8.11
     ruby=ruby 3.1.7p261 (2025-03-26 revision 0a3704f218) [x86_64-linux]
     program_name=/usr/bin/chef-client
     executable=/opt/chef/bin/chef-client


     Running handlers:
     [2025-10-06T13:34:38+00:00] ERROR: Running exception handlers
     Running handlers complete
     [2025-10-06T13:34:38+00:00] ERROR: Exception handlers complete
     Infra Phase failed. 0 resources updated in 01 seconds
     [2025-10-06T13:34:38+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:34:38+00:00] DEBUG: opened
     [2025-10-06T13:34:38+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:34:38+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
     [2025-10-06T13:34:38+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
     [2025-10-06T13:34:38+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:34:38+00:00] DEBUG: opened
     [2025-10-06T13:34:38+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:34:38+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
     [2025-10-06T13:34:38+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
     [2025-10-06T13:34:38+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
     [2025-10-06T13:34:38+00:00] FATAL: ---------------------------------------------------------------------------------------
     [2025-10-06T13:34:38+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
     [2025-10-06T13:34:38+00:00] FATAL: ---------------------------------------------------------------------------------------
     [2025-10-06T13:34:38+00:00] DEBUG: Net::HTTPClientException: 401 "Unauthorized"
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/net-http-0.6.0/lib/net/http/response.rb:277:in `error!'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:159:in `request'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:122:in `get'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:653:in `load'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:636:in `find_or_create'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/policy_builder/dynamic.rb:74:in `load_node'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:450:in `load_node'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:281:in `run'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:305:in `run_with_graceful_exit_option'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:281:in `block in run_chef_client'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/local_mode.rb:42:in `with_server_connectivity'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:264:in `run_chef_client'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application/base.rb:354:in `run_application'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:67:in `run'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-bin-18.8.11/bin/chef-client:25:in `<top (required)>'
     /usr/bin/chef-client:193:in `load'
     /usr/bin/chef-client:193:in `<main>'
     [2025-10-06T13:34:38+00:00] FATAL: Net::HTTPClientException: 401 "Unauthorized"
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo rm -f "/tmp/chef_O14G86/bootstrap.sh"
[root@ip-172-31-8-220 chef-repo]# knofe node list
bash: knofe: command not found
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb

[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]#
[root@ip-172-31-8-220 chef-repo]# knife bootstrap 172.31.7.128 -N webnode --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.7.128 ()' can't be established.
fingerprint is SHA256:N2j7ar6bwtgFLs9KFT9ob4GcOxdjpfJmK6LGABNLXvM.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = show version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo mkdir -p '/tmp/chef_Ao9m0Q'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo chown ec2-user '/tmp/chef_Ao9m0Q'
Bootstrapping 172.31.7.128
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo sh /tmp/chef_Ao9m0Q/bootstrap.sh
 [172.31.7.128] -----> Existing Chef Infra Client installation detected
 [172.31.7.128] Starting the first Chef Infra Client Client run...
 [172.31.7.128] [2025-10-06T13:38:49+00:00] DEBUG: Reading products and relationships...
 [172.31.7.128] [2025-10-06T13:38:49+00:00] DEBUG: Successfully read products and relationships
 [172.31.7.128] [2025-10-06T13:38:49+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.7.128] [2025-10-06T13:38:49+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
 [172.31.7.128] [2025-10-06T13:38:49+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
 [172.31.7.128] [2025-10-06T13:38:49+00:00] DEBUG: Missing licenses remaining: []
 [172.31.7.128] [2025-10-06T13:38:49+00:00] DEBUG: All licenses present
 [172.31.7.128] [2025-10-06T13:38:49+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] Chef Infra Client, version 18.8.11
 [172.31.7.128]
 [172.31.7.128] Patents: https://www.chef.io/patents
 [172.31.7.128]
 [172.31.7.128] Infra Phase starting
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:38:49+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.7.128] [2025-10-06T13:38:49+00:00] INFO: Platform: x86_64-linux
 [172.31.7.128] [2025-10-06T13:38:49+00:00] INFO: Chef-client pid: 8670
 [172.31.7.128] [2025-10-06T13:38:49+00:00] DEBUG: Chef-client request_id: 67cdf275-5578-4249-961e-d3cf40d07f57
 [172.31.7.128] [2025-10-06T13:38:49+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T13:38:50+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:51+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128]
 [172.31.7.128] ================================================================================
 [172.31.7.128]
 [172.31.7.128] Chef Infra Client encountered an error attempting to load the node data for "webnode"
 [172.31.7.128]
 [172.31.7.128] ================================================================================
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Authentication Error:
 [172.31.7.128]
 [172.31.7.128] ---------------------
 [172.31.7.128]
 [172.31.7.128] Failed to authenticate to the chef server (http 401).
 [172.31.7.128]
 [172.31.7.128] Server Response:
 [172.31.7.128]
 [172.31.7.128] ----------------
 [172.31.7.128]
 [172.31.7.128] Failed to authenticate as 'webnode'. Ensure that your node_name and client key are correct.
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Relevant Config Settings:
 [172.31.7.128]
 [172.31.7.128] -------------------------
 [172.31.7.128]
 [172.31.7.128] chef_server_url   "https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail"
 [172.31.7.128] node_name         "webnode"
 [172.31.7.128] client_key        "/etc/chef/client.pem"
 [172.31.7.128]
 [172.31.7.128] If these settings are correct, your client_key may be invalid, or
 [172.31.7.128] you may have a chef user with the same client name as this node.
 [172.31.7.128]
 [172.31.7.128] System Info:
 [172.31.7.128]
 [172.31.7.128] ------------
 [172.31.7.128]
 [172.31.7.128] chef_version=18.8.11
 [172.31.7.128] ruby=ruby 3.1.7p261 (2025-03-26 revision 0a3704f218) [x86_64-linux]
 [172.31.7.128] program_name=/usr/bin/chef-client
 [172.31.7.128] executable=/opt/chef/bin/chef-client
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Running handlers:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:38:51+00:00] ERROR: Running exception handlers
 [172.31.7.128] Running handlers complete
 [172.31.7.128] [2025-10-06T13:38:51+00:00] ERROR: Exception handlers complete
 [172.31.7.128] Infra Phase failed. 0 resources updated in 01 seconds
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T13:38:51+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
 [172.31.7.128] [2025-10-06T13:38:51+00:00] FATAL: ---------------------------------------------------------------------------------------
 [172.31.7.128] [2025-10-06T13:38:51+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
 [172.31.7.128] [2025-10-06T13:38:51+00:00] FATAL: ---------------------------------------------------------------------------------------
 [172.31.7.128] [2025-10-06T13:38:51+00:00] DEBUG: Net::HTTPClientException: 401 "Unauthorized"
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/net-http-0.6.0/lib/net/http/response.rb:277:in `error!'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:159:in `request'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:122:in `get'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:653:in `load'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:636:in `find_or_create'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/policy_builder/dynamic.rb:74:in `load_node'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:450:in `load_node'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:281:in `run'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:305:in `run_with_graceful_exit_option'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:281:in `block in run_chef_client'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/local_mode.rb:42:in `with_server_connectivity'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:264:in `run_chef_client'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application/base.rb:354:in `run_application'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:67:in `run'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-bin-18.8.11/bin/chef-client:25:in `<top (required)>'
/usr/bin/chef-client:193:in `load'
/usr/bin/chef-client:193:in `<main>'
 [172.31.7.128] [2025-10-06T13:38:51+00:00] FATAL: Net::HTTPClientException: 401 "Unauthorized"
ERROR: The following error occurred on 172.31.7.128:
ERROR: -----> Existing Chef Infra Client installation detected
     Starting the first Chef Infra Client Client run...
     [2025-10-06T13:38:49+00:00] DEBUG: Reading products and relationships...
     [2025-10-06T13:38:49+00:00] DEBUG: Successfully read products and relationships
     [2025-10-06T13:38:49+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
     [2025-10-06T13:38:49+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
     [2025-10-06T13:38:49+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
     [2025-10-06T13:38:49+00:00] DEBUG: Missing licenses remaining: []
     [2025-10-06T13:38:49+00:00] DEBUG: All licenses present
     [2025-10-06T13:38:49+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
     Chef Infra Client, version 18.8.11
     Patents: https://www.chef.io/patents
     Infra Phase starting
     [2025-10-06T13:38:49+00:00] INFO: *** Chef Infra Client 18.8.11 ***
     [2025-10-06T13:38:49+00:00] INFO: Platform: x86_64-linux
     [2025-10-06T13:38:49+00:00] INFO: Chef-client pid: 8670
     [2025-10-06T13:38:49+00:00] DEBUG: Chef-client request_id: 67cdf275-5578-4249-961e-d3cf40d07f57
     [2025-10-06T13:38:49+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
     [2025-10-06T13:38:50+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
     rx-checksumming: on [fixed]
     tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
     scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
     tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
     generic-segmentation-offload: on
     generic-receive-offload: on
     large-receive-offload: off [fixed]
     rx-vlan-offload: off [fixed]
     tx-vlan-offload: off [fixed]
     ntuple-filters: off [fixed]
     receive-hashing: off [fixed]
     highdma: off [fixed]
     rx-vlan-filter: off [fixed]
     vlan-challenged: off [fixed]
     tx-lockless: off [fixed]
     netns-local: off [fixed]
     tx-gso-robust: on [fixed]
     tx-fcoe-segmentation: off [fixed]
     tx-gre-segmentation: off [fixed]
     tx-gre-csum-segmentation: off [fixed]
     tx-ipxip4-segmentation: off [fixed]
     tx-ipxip6-segmentation: off [fixed]
     tx-udp_tnl-segmentation: off [fixed]
     tx-udp_tnl-csum-segmentation: off [fixed]
     tx-gso-partial: off [fixed]
     tx-tunnel-remcsum-segmentation: off [fixed]
     tx-sctp-segmentation: off [fixed]
     tx-esp-segmentation: off [fixed]
     tx-udp-segmentation: off [fixed]
     tx-gso-list: off [fixed]
     fcoe-mtu: off [fixed]
     tx-nocache-copy: off
     loopback: off [fixed]
     rx-fcs: off [fixed]
     rx-all: off [fixed]
     tx-vlan-stag-hw-insert: off [fixed]
     rx-vlan-stag-hw-parse: off [fixed]
     rx-vlan-stag-filter: off [fixed]
     l2-fwd-offload: off [fixed]
     hw-tc-offload: off [fixed]
     esp-hw-offload: off [fixed]
     esp-tx-csum-hw-offload: off [fixed]
     rx-udp_tunnel-port-offload: off [fixed]
     tls-hw-tx-offload: off [fixed]
     tls-hw-rx-offload: off [fixed]
     rx-gro-hw: off [fixed]
     tls-hw-record: off [fixed]
     rx-gro-list: off
     macsec-hw-offload: off [fixed]
     rx-udp-gro-forwarding: off
     hsr-tag-ins-offload: off [fixed]
     hsr-tag-rm-offload: off [fixed]
     hsr-fwd-offload: off [fixed]
     hsr-dup-offload: off [fixed]

     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:50+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T13:38:50+00:00] DEBUG: opened
     [2025-10-06T13:38:51+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
     [2025-10-06T13:38:51+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
     [2025-10-06T13:38:51+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:38:51+00:00] DEBUG: opened
     [2025-10-06T13:38:51+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:38:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384

     ================================================================================
     Chef Infra Client encountered an error attempting to load the node data for "webnode"
     ================================================================================

     Authentication Error:
     ---------------------
     Failed to authenticate to the chef server (http 401).

     Server Response:
     ----------------
     Failed to authenticate as 'webnode'. Ensure that your node_name and client key are correct.

     Relevant Config Settings:
     -------------------------
     chef_server_url   "https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail"
     node_name         "webnode"
     client_key        "/etc/chef/client.pem"

     If these settings are correct, your client_key may be invalid, or
     you may have a chef user with the same client name as this node.

     System Info:
     ------------
     chef_version=18.8.11
     ruby=ruby 3.1.7p261 (2025-03-26 revision 0a3704f218) [x86_64-linux]
     program_name=/usr/bin/chef-client
     executable=/opt/chef/bin/chef-client


     Running handlers:
     [2025-10-06T13:38:51+00:00] ERROR: Running exception handlers
     Running handlers complete
     [2025-10-06T13:38:51+00:00] ERROR: Exception handlers complete
     Infra Phase failed. 0 resources updated in 01 seconds
     [2025-10-06T13:38:51+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:38:51+00:00] DEBUG: opened
     [2025-10-06T13:38:51+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:38:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
     [2025-10-06T13:38:51+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
     [2025-10-06T13:38:51+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:38:51+00:00] DEBUG: opened
     [2025-10-06T13:38:51+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T13:38:51+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
     [2025-10-06T13:38:51+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
     [2025-10-06T13:38:51+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
     [2025-10-06T13:38:51+00:00] FATAL: ---------------------------------------------------------------------------------------
     [2025-10-06T13:38:51+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
     [2025-10-06T13:38:51+00:00] FATAL: ---------------------------------------------------------------------------------------
     [2025-10-06T13:38:51+00:00] DEBUG: Net::HTTPClientException: 401 "Unauthorized"
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/net-http-0.6.0/lib/net/http/response.rb:277:in `error!'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:159:in `request'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:122:in `get'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:653:in `load'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:636:in `find_or_create'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/policy_builder/dynamic.rb:74:in `load_node'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:450:in `load_node'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:281:in `run'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:305:in `run_with_graceful_exit_option'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:281:in `block in run_chef_client'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/local_mode.rb:42:in `with_server_connectivity'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:264:in `run_chef_client'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application/base.rb:354:in `run_application'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:67:in `run'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-bin-18.8.11/bin/chef-client:25:in `<top (required)>'
     /usr/bin/chef-client:193:in `load'
     /usr/bin/chef-client:193:in `<main>'
     [2025-10-06T13:38:51+00:00] FATAL: Net::HTTPClientException: 401 "Unauthorized"
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo rm -f "/tmp/chef_Ao9m0Q/bootstrap.sh"
[root@ip-172-31-8-220 chef-repo]# knife bootstrap 172.31.7.77 -N webnode --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.7.77 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.77
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.7.77 ()' can't be established.
fingerprint is SHA256:p/K/910rG/xiD5h9qaGleVq29QjpoCAsnxwkzU2Brv8.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.7.77 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.77
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = show version
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sudo mkdir -p '/tmp/chef_5Hs4OJ'
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sudo chown ec2-user '/tmp/chef_5Hs4OJ'
Bootstrapping 172.31.7.77
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sudo sh /tmp/chef_5Hs4OJ/bootstrap.sh
 [172.31.7.77] -----> Installing Chef Omnibus (stable/latest)
downloading https://omnitruck.chef.io/chef/install.sh
  to file /tmp/install.sh.5393/install.sh
trying wget...
 [172.31.7.77] amazon 2023 x86_64
Getting information for chef stable latest for amazon...
downloading https://omnitruck.chef.io/stable/chef/metadata?v=latest&p=amazon&pv=2023&m=x86_64
  to file /tmp/install.sh.5397/metadata.txt
 [172.31.7.77] trying wget...
 [172.31.7.77] sha1     262cc97e8c66f6cd1b865190fc17d725fee68aac
sha256  8bcb6286938b8f8df08b6229919e973f95a74a70e1122e3df194433f289fc534
url     https://packages.chef.io/files/stable/chef/18.8.11/amazon/2023/chef-18.8.11-1.amazon2023.x86_64.rpm
version 18.8.11
 [172.31.7.77]
 [172.31.7.77] downloaded metadata file looks valid...
 [172.31.7.77] downloading https://packages.chef.io/files/stable/chef/18.8.11/amazon/2023/chef-18.8.11-1.amazon2023.x86_64.rpm
  to file /tmp/install.sh.5397/chef-18.8.11-1.amazon2023.x86_64.rpm
 [172.31.7.77] trying wget...
 [172.31.7.77] Comparing checksum with sha256sum...
 [172.31.7.77] Installing chef latest
installing with rpm...
 [172.31.7.77] warning:
 [172.31.7.77] /tmp/install.sh.5397/chef-18.8.11-1.amazon2023.x86_64.rpm: Header V4 DSA/SHA256 Signature, key ID 83ef826a: NOKEY
 [172.31.7.77] Verifying...
 [172.31.7.77] ########################################
 [172.31.7.77]
 [172.31.7.77] Preparing...
 [172.31.7.77] ########################################
 [172.31.7.77]
 [172.31.7.77] Updating / installing...
chef-18.8.11-1.amazon2023
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77] #
 [172.31.7.77]
 [172.31.7.77] Thank you for installing Chef Infra Client! For help getting started visit https://learn.chef.io
 [172.31.7.77] Starting the first Chef Infra Client Client run...
 [172.31.7.77] [2025-10-06T13:40:05+00:00] DEBUG: Reading products and relationships...
 [172.31.7.77] [2025-10-06T13:40:05+00:00] DEBUG: Successfully read products and relationships
 [172.31.7.77] [2025-10-06T13:40:05+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.7.77] [2025-10-06T13:40:05+00:00] DEBUG: Missing licenses remaining: ["infra-client", "inspec"]
 [172.31.7.77] [2025-10-06T13:40:05+00:00] INFO: Persisting a license for Chef Infra Client at path /etc/chef/accepted_licenses/chef_infra_client
 [172.31.7.77] [2025-10-06T13:40:05+00:00] INFO: Persisting a license for Chef InSpec at path /etc/chef/accepted_licenses/inspec
 [172.31.7.77] +---------------------------------------------+
✔ 2 product licenses accepted.
+---------------------------------------------+
 [172.31.7.77] [2025-10-06T13:40:05+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.77] Chef Infra Client, version 18.8.11
 [172.31.7.77]
 [172.31.7.77] Patents: https://www.chef.io/patents
 [172.31.7.77]
 [172.31.7.77] Infra Phase starting
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:40:06+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.7.77] [2025-10-06T13:40:06+00:00] INFO: Platform: x86_64-linux
 [172.31.7.77] [2025-10-06T13:40:06+00:00] INFO: Chef-client pid: 5468
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: Chef-client request_id: 63f9c73a-7795-43b2-872d-7263d39924f0
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:06+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
Creating a new client identity for webnode using the validator key.
[2025-10-06T13:40:07+00:00] INFO: Client key /etc/chef/client.pem is not present - registering
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:07+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Extracting run list from JSON attributes provided on command line
 [172.31.7.77] [2025-10-06T13:40:08+00:00] INFO: Setting the run_list to [] from CLI options
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Applying attributes from json file
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Platform is amazon version 2023
 [172.31.7.77] [2025-10-06T13:40:08+00:00] INFO: Run List is []
 [172.31.7.77] [2025-10-06T13:40:08+00:00] INFO: Run List expands to []
 [172.31.7.77] [2025-10-06T13:40:08+00:00] INFO: Starting Chef Infra Client Run for webnode
 [172.31.7.77] [2025-10-06T13:40:08+00:00] INFO: Running start handlers
 [172.31.7.77] [2025-10-06T13:40:08+00:00] INFO: Start handlers complete.
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] Resolving cookbooks for run list: []
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] [2025-10-06T13:40:08+00:00] INFO: Loading cookbooks []
 [172.31.7.77] Synchronizing cookbooks:
 [172.31.7.77]
 [172.31.7.77] Installing cookbook gem dependencies:
Compiling cookbooks...
[2025-10-06T13:40:08+00:00] DEBUG: Cookbooks to compile: []
 [172.31.7.77] Loading Chef InSpec profile files:
 [172.31.7.77]
 [172.31.7.77] Loading Chef InSpec input files:
 [172.31.7.77]
 [172.31.7.77] Loading Chef InSpec waiver files:
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:40:08+00:00] WARN: Node webnode has an empty run list.
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] Converging 0 resources
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Converging node webnode
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Saving the current state of node webnode
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] [2025-10-06T13:40:08+00:00] INFO: Chef Infra Client Run complete in 0.641621404 seconds
 [172.31.7.77]
 [172.31.7.77] Running handlers:
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:40:08+00:00] INFO: Running report handlers
 [172.31.7.77] Running handlers complete
 [172.31.7.77] [2025-10-06T13:40:08+00:00] INFO: Report handlers complete
 [172.31.7.77] Infra Phase complete, 0/0 resources updated in 02 seconds
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.7.77] [2025-10-06T13:40:08+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
WARNING:
       +---------------------------------------------------------------------------------------------------------------------+
         To ensure uninterrupted downloads of Infra Client, Knife Bootstrap will soon require a license key.

         Here's what you need to know:
           * Adding a License: Use the < knife license > command to easily add a license key.
           * For Commercial Customers: Obtain your license key from the customer portal.
           * For Free/Trial Users: Non-commercial users can generate a license key from https://www.chef.io/license-generation-free-trial

         No action is require at this time, but please prepare for this change.
       +---------------------------------------------------------------------------------------------------------------------+
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sudo rm -f "/tmp/chef_5Hs4OJ/bootstrap.sh"
[root@ip-172-31-8-220 chef-repo]# knife client list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
dropmail-validator
webnode
[root@ip-172-31-8-220 chef-repo]# knofe node list
bash: knofe: command not found
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode role/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: The data in your request was invalid
Response: Field 'run_list' is not a valid run list
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role/[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: ArgumentError: Unable to create Chef::RunList::RunListItem from String:"role/[webserver]": must be recipe[] or role[]
[root@ip-172-31-8-220 chef-repo]# knife show role
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: role: No such file or directory
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# ls
starter.rb  webserver.rb
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]# tree
.
├── README.md
├── cookbooks
│   ├── chefignore
│   ├── starter
│   │   ├── attributes
│   │   │   └── default.rb
│   │   ├── files
│   │   │   └── default
│   │   │       └── sample.txt
│   │   ├── metadata.rb
│   │   ├── recipes
│   │   │   └── default.rb
│   │   └── templates
│   │       └── default
│   │           └── sample.erb
│   └── webserver
│       ├── CHANGELOG.md
│       ├── LICENSE
│       ├── Policyfile.rb
│       ├── README.md
│       ├── automate.rb
│       ├── chefignore
│       ├── compliance
│       │   ├── README.md
│       │   ├── inputs
│       │   ├── profiles
│       │   └── waivers
│       ├── kitchen.yml
│       ├── metadata.rb
│       ├── recipes
│       │   ├── default.rb
│       │   └── webserver.rb
│       ├── spec
│       │   ├── spec_helper.rb
│       │   └── unit
│       │       └── recipes
│       │           ├── autoupdate_spec.rb
│       │           └── webserver_spec.rb
│       └── test
│           └── integration
│               └── default
│                   ├── autoupdate_test.rb
│                   ├── default_test.rb
│                   └── webserver_test.rb
├── id_rsa.pem
└── roles
    ├── starter.rb
    └── webserver.rb

21 directories, 27 files
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife bootstrap 172.31.7.77 -N webnode --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.7.77 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.77
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.7.77 ()' can't be established.
fingerprint is SHA256:p/K/910rG/xiD5h9qaGleVq29QjpoCAsnxwkzU2Brv8.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.7.77 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.77
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = show version
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sudo mkdir -p '/tmp/chef_hegcQG'
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sudo chown ec2-user '/tmp/chef_hegcQG'
Bootstrapping 172.31.7.77
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sudo sh /tmp/chef_hegcQG/bootstrap.sh
 [172.31.7.77] -----> Existing Chef Infra Client installation detected
 [172.31.7.77] Starting the first Chef Infra Client Client run...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: Reading products and relationships...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: Successfully read products and relationships
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: Missing licenses remaining: []
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: All licenses present
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.77] Chef Infra Client, version 18.8.11
 [172.31.7.77]
 [172.31.7.77] Patents: https://www.chef.io/patents
 [172.31.7.77]
 [172.31.7.77] Infra Phase starting
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:46:17+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.7.77] [2025-10-06T13:46:17+00:00] INFO: Platform: x86_64-linux
 [172.31.7.77] [2025-10-06T13:46:17+00:00] INFO: Chef-client pid: 6200
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: Chef-client request_id: 0507671f-c2c7-49e8-a05a-976d794776de
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:17+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: Extracting run list from JSON attributes provided on command line
 [172.31.7.77] [2025-10-06T13:46:18+00:00] INFO: Setting the run_list to [] from CLI options
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: Applying attributes from json file
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: Platform is amazon version 2023
 [172.31.7.77] [2025-10-06T13:46:18+00:00] INFO: Run List is []
 [172.31.7.77] [2025-10-06T13:46:18+00:00] INFO: Run List expands to []
 [172.31.7.77] [2025-10-06T13:46:18+00:00] INFO: Starting Chef Infra Client Run for webnode
 [172.31.7.77] [2025-10-06T13:46:18+00:00] INFO: Running start handlers
 [172.31.7.77] [2025-10-06T13:46:18+00:00] INFO: Start handlers complete.
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] Resolving cookbooks for run list: []
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:18+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] [2025-10-06T13:46:18+00:00] INFO: Loading cookbooks []
 [172.31.7.77] Synchronizing cookbooks:
 [172.31.7.77]
 [172.31.7.77] Installing cookbook gem dependencies:
Compiling cookbooks...
[2025-10-06T13:46:18+00:00] DEBUG: Cookbooks to compile: []
 [172.31.7.77] Loading Chef InSpec profile files:
 [172.31.7.77]
 [172.31.7.77] Loading Chef InSpec input files:
 [172.31.7.77]
 [172.31.7.77] Loading Chef InSpec waiver files:
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:46:19+00:00] WARN: Node webnode has an empty run list.
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] Converging 0 resources
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: Converging node webnode
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: Saving the current state of node webnode
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: opened
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.77] [2025-10-06T13:46:19+00:00] INFO: Chef Infra Client Run complete in 0.611889305 seconds
 [172.31.7.77]
 [172.31.7.77] Running handlers:
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:46:19+00:00] INFO: Running report handlers
 [172.31.7.77] Running handlers complete
 [172.31.7.77] [2025-10-06T13:46:19+00:00] INFO: Report handlers complete
 [172.31.7.77] Infra Phase complete, 0/0 resources updated in 02 seconds
 [172.31.7.77]
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: Chef::Compliance::Runner#enabled?: Chef InSpec profiles? false
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: Chef::Compliance::Runner#enabled?: audit cookbook?
 [172.31.7.77] [2025-10-06T13:46:19+00:00] DEBUG: Chef::Compliance::Runner#enabled?: compliance phase attr? false
WARNING:
       +---------------------------------------------------------------------------------------------------------------------+
         To ensure uninterrupted downloads of Infra Client, Knife Bootstrap will soon require a license key.

         Here's what you need to know:
           * Adding a License: Use the < knife license > command to easily add a license key.
           * For Commercial Customers: Obtain your license key from the customer portal.
           * For Free/Trial Users: Non-commercial users can generate a license key from https://www.chef.io/license-generation-free-trial

         No action is require at this time, but please prepare for this change.
       +---------------------------------------------------------------------------------------------------------------------+
DEBUG: [SSH] ec2-user@172.31.7.77 cmd = sudo rm -f "/tmp/chef_hegcQG/bootstrap.sh"
[root@ip-172-31-8-220 chef-repo]#
Broadcast message from root@localhost (Mon 2025-10-06 13:46:56 UTC):

The system will power off now!


Broadcast message from root@localhost (Mon 2025-10-06 13:46:56 UTC):

The system will power off now!

Connection to 43.204.145.143 closed by remote host.
Connection to 43.204.145.143 closed.
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac> ssh -i .\id_rsa ec2-user@13.201.76.161
The authenticity of host '13.201.76.161 (13.201.76.161)' can't be established.
ED25519 key fingerprint is SHA256:bwQiJsJXrNpyWX8rwAvfGl2MHw0dFNaCOu5YGVqT/3Q.
This host key is known by the following other names/addresses:
    C:\Users\Gaurav.26/.ssh/known_hosts:161: 43.204.145.143
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '13.201.76.161' (ED25519) to the list of known hosts.

A newer release of "Amazon Linux" is available.
  Version 2023.8.20250908:
  Version 2023.8.20250915:
  Version 2023.9.20250929:
Run "/usr/bin/dnf check-release-update" for full release and version update info
   ,     #_
   ~\_  ####_        Amazon Linux 2023
  ~~  \_#####\
  ~~     \###|
  ~~       \#/ ___   https://aws.amazon.com/linux/amazon-linux-2023
   ~~       V~' '->
    ~~~         /
      ~~._.   _/
         _/ _/
       _/m/'
Last login: Mon Oct  6 13:29:38 2025 from 103.146.111.77
[ec2-user@ip-172-31-8-220 ~]$ sudo su
[root@ip-172-31-8-220 ec2-user]# knife node list
WARNING: No knife configuration file found. See https://docs.chef.io/config_rb/ for details.
WARN: Failed to read the private key /etc/chef/client.pem: #<Errno::ENOENT: No such file or directory @ rb_sysopen - /etc/chef/client.pem>
ERROR: Your private key could not be loaded from /etc/chef/client.pem
Check your configuration file and ensure that your private key is readable
[root@ip-172-31-8-220 ec2-user]# cd chef-repo/
[root@ip-172-31-8-220 chef-repo]#
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode
[root@ip-172-31-8-220 chef-repo]# tree
.
├── README.md
├── cookbooks
│   ├── chefignore
│   ├── starter
│   │   ├── attributes
│   │   │   └── default.rb
│   │   ├── files
│   │   │   └── default
│   │   │       └── sample.txt
│   │   ├── metadata.rb
│   │   ├── recipes
│   │   │   └── default.rb
│   │   └── templates
│   │       └── default
│   │           └── sample.erb
│   └── webserver
│       ├── CHANGELOG.md
│       ├── LICENSE
│       ├── Policyfile.rb
│       ├── README.md
│       ├── automate.rb
│       ├── chefignore
│       ├── compliance
│       │   ├── README.md
│       │   ├── inputs
│       │   ├── profiles
│       │   └── waivers
│       ├── kitchen.yml
│       ├── metadata.rb
│       ├── recipes
│       │   ├── default.rb
│       │   └── webserver.rb
│       ├── spec
│       │   ├── spec_helper.rb
│       │   └── unit
│       │       └── recipes
│       │           ├── autoupdate_spec.rb
│       │           └── webserver_spec.rb
│       └── test
│           └── integration
│               └── default
│                   ├── autoupdate_test.rb
│                   ├── default_test.rb
│                   └── webserver_test.rb
├── id_rsa.pem
└── roles
    ├── starter.rb
    └── webserver.rb

21 directories, 27 files
[root@ip-172-31-8-220 chef-repo]# cd cookbooks/
[root@ip-172-31-8-220 cookbooks]# ls
chefignore  starter  webserver
[root@ip-172-31-8-220 cookbooks]# cd wb
bash: cd: wb: No such file or directory
[root@ip-172-31-8-220 cookbooks]# cd webserver/
[root@ip-172-31-8-220 webserver]# ls
CHANGELOG.md  LICENSE  Policyfile.rb  README.md  automate.rb  chefignore  compliance  kitchen.yml  metadata.rb  recipes spec  test
[root@ip-172-31-8-220 webserver]# vi recipes/webserver.rb

[root@ip-172-31-8-220 webserver]# cd ..
[root@ip-172-31-8-220 cookbooks]# cd ..
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# ls
starter.rb  webserver.rb
[root@ip-172-31-8-220 roles]# vi webserver.rb
[root@ip-172-31-8-220 roles]#
[root@ip-172-31-8-220 roles]# vi webserver.rb
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife role from file role/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: Could not find or open file 'role/webserver.rb' in current directory or in 'roles/role/webserver.rb'
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role webserver
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife node lits
FATAL: Cannot find subcommand for: 'node lits'
Available node subcommands: (for details, knife SUB-COMMAND --help)

** NODE COMMANDS **
knife node bulk delete REGEX (options)
knife node create NODE (options)
knife node delete [NODE [NODE]] (options)
knife node edit NODE (options)
knife node environment set NODE ENVIRONMENT
knife node from file FILE (options)
knife node list (options)
knife node policy set NODE POLICY_GROUP POLICY_NAME (options)
knife node run_list add [NODE] [ENTRY [ENTRY]] (options)
knife node run_list remove [NODE] [ENTRY [ENTRY]] (options)
knife node run_list set NODE ENTRIES (options)
knife node show NODE (options)

[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]# knife role show
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
USAGE: knife role show ROLE (options)
    -a ATTR1 [--attribute ATTR2] ,   Show one or more attributes
        --attribute
    -s, --server-url URL             Chef Infra Server URL.
        --chef-zero-host HOST        Host to start Chef Infra Zero on.
        --chef-zero-port PORT        Port (or port range) to start Chef Infra Zero on. Port ranges like 1000,1010 or 8889-9999 will try all given ports until one works.
    -k, --key KEY                    Chef Infra Server API client key.
        --[no-]color                 Use colored output, defaults to enabled.
    -c, --config CONFIG              The configuration file to use.
        --config-option OPTION=VALUE Override a single configuration option.
        --defaults                   Accept default values for all questions.
    -d, --disable-editing            Do not open EDITOR, just accept the data as is.
    -e, --editor EDITOR              Set the editor to use for interactive commands.
    -E, --environment ENVIRONMENT    Set the Chef Infra Client environment (except for in searches, where this will be flagrantly ignored).
    -S, --field-separator SEPARATOR  Character separator used to delineate nesting in --attribute filters (default ".")
        --[no-]fips                  Enable FIPS mode.
    -F, --format FORMAT              Which format to use for output. (valid options: 'summary', 'text', 'json', 'yaml',or 'pp')
        --[no-]listen                Whether a local mode (-z) server binds to a port.
    -z, --local-mode                 Point knife commands at local repository instead of Chef Infra Server.
    -u, --user USER                  Chef Infra Server API client username.
        --print-after                Show the data after a destructive operation.
        --profile PROFILE            The credentials profile to select.
    -V, --verbose                    More verbose output. Use twice (-VV) for additional verbosity and three times (-VVV) for maximum verbosity.
    -v, --version                    Show Chef Infra Client version.
    -y, --yes                        Say yes to all prompts for confirmation.
    -h, --help                       Show this help message.
FATAL: You must specify a role name.
[root@ip-172-31-8-220 chef-repo]# knife role show list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: The object you are looking for could not be found
Response: Cannot load role list
[root@ip-172-31-8-220 chef-repo]#
[root@ip-172-31-8-220 chef-repo]# knife role list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webserver
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd cookbooks
[root@ip-172-31-8-220 cookbooks]# ls
chefignore  starter  webserver
[root@ip-172-31-8-220 cookbooks]# cd webserver/
[root@ip-172-31-8-220 webserver]# tree
.
├── CHANGELOG.md
├── LICENSE
├── Policyfile.rb
├── README.md
├── automate.rb
├── chefignore
├── compliance
│   ├── README.md
│   ├── inputs
│   ├── profiles
│   └── waivers
├── kitchen.yml
├── metadata.rb
├── recipes
│   ├── default.rb
│   └── webserver.rb
├── spec
│   ├── spec_helper.rb
│   └── unit
│       └── recipes
│           ├── autoupdate_spec.rb
│           └── webserver_spec.rb
└── test
    └── integration
        └── default
            ├── autoupdate_test.rb
            ├── default_test.rb
            └── webserver_test.rb

11 directories, 17 files
[root@ip-172-31-8-220 webserver]# chef generate recipe autoupdate
Recipe: code_generator::recipe
  * directory[/home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes] action create (up to date)
  * cookbook_file[/home/ec2-user/chef-repo/cookbooks/webserver/spec/spec_helper.rb] action create_if_missing (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes/autoupdate_spec.rb] action create_if_missing (up to date)
  * directory[/home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default] action create (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default/autoupdate_test.rb] action create_if_missing (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/recipes/autoupdate.rb] action create
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/recipes/autoupdate.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/recipes/autoupdate.rb from none to e02227
    (diff output suppressed by config)
    - restore selinux security context
[root@ip-172-31-8-220 webserver]# vi recipes/autoupdate.rb
[root@ip-172-31-8-220 webserver]# cd ..
[root@ip-172-31-8-220 cookbooks]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Uploading /tmp/d20251006-2747-1c7hpc/webserver/recipes/autoupdate.rb (checksum hex = 9274fe37d68fa8371b5e8d993239762d) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-9274fe37d68fa8371b5e8d993239762d?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T143542Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=ac2e16245ab13ce12ecc4dcd0a5499215f0b6b644bcf2eaa0a26f9e6435c3753
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]# cd ..
[root@ip-172-31-8-220 ec2-user]# cd chef-repo/
[root@ip-172-31-8-220 chef-repo]# cd cookbooks/
[root@ip-172-31-8-220 cookbooks]# ls
chefignore  starter  webserver
[root@ip-172-31-8-220 cookbooks]# cd webserver/
[root@ip-172-31-8-220 webserver]# vi recipes/webserver.rb
[root@ip-172-31-8-220 webserver]# cd ..
[root@ip-172-31-8-220 cookbooks]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Uploading /tmp/d20251006-2958-61txhi/webserver/recipes/webserver.rb (checksum hex = ddcf000c0d6061488f29ba0f4892f249) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-ddcf000c0d6061488f29ba0f4892f249?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T144110Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=56d13f6747dcc2e2013809238995a239927929313eac5287a0e82f894741a60f
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# cd cookbooks/
[root@ip-172-31-8-220 cookbooks]# ls
chefignore  starter  webserver
[root@ip-172-31-8-220 cookbooks]# cd webserver/
[root@ip-172-31-8-220 webserver]# ls
CHANGELOG.md  LICENSE  Policyfile.rb  README.md  automate.rb  chefignore  compliance  kitchen.yml  metadata.rb  recipes spec  test
[root@ip-172-31-8-220 webserver]# tree
.
├── CHANGELOG.md
├── LICENSE
├── Policyfile.rb
├── README.md
├── automate.rb
├── chefignore
├── compliance
│   ├── README.md
│   ├── inputs
│   ├── profiles
│   └── waivers
├── kitchen.yml
├── metadata.rb
├── recipes
│   ├── autoupdate.rb
│   ├── default.rb
│   └── webserver.rb
├── spec
│   ├── spec_helper.rb
│   └── unit
│       └── recipes
│           ├── autoupdate_spec.rb
│           └── webserver_spec.rb
└── test
    └── integration
        └── default
            ├── autoupdate_test.rb
            ├── default_test.rb
            └── webserver_test.rb

11 directories, 18 files
[root@ip-172-31-8-220 webserver]# chef generate recipe  software
Recipe: code_generator::recipe
  * directory[/home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes] action create (up to date)
  * cookbook_file[/home/ec2-user/chef-repo/cookbooks/webserver/spec/spec_helper.rb] action create_if_missing (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes/software_spec.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes/software_spec.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/spec/unit/recipes/software_spec.rb from none to 6752e5
    (diff output suppressed by config)
    - restore selinux security context
  * directory[/home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default] action create (up to date)
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default/software_test.rb] action create_if_missing
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default/software_test.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/test/integration/default/software_test.rb from none to 43439a
    (diff output suppressed by config)
    - restore selinux security context
  * template[/home/ec2-user/chef-repo/cookbooks/webserver/recipes/software.rb] action create
    - create new file /home/ec2-user/chef-repo/cookbooks/webserver/recipes/software.rb
    - update content in file /home/ec2-user/chef-repo/cookbooks/webserver/recipes/software.rb from none to 13b630
    (diff output suppressed by config)
    - restore selinux security context
[root@ip-172-31-8-220 webserver]# tree
.
├── CHANGELOG.md
├── LICENSE
├── Policyfile.rb
├── README.md
├── automate.rb
├── chefignore
├── compliance
│   ├── README.md
│   ├── inputs
│   ├── profiles
│   └── waivers
├── kitchen.yml
├── metadata.rb
├── recipes
│   ├── autoupdate.rb
│   ├── default.rb
│   ├── software.rb
│   └── webserver.rb
├── spec
│   ├── spec_helper.rb
│   └── unit
│       └── recipes
│           ├── autoupdate_spec.rb
│           ├── software_spec.rb
│           └── webserver_spec.rb
└── test
    └── integration
        └── default
            ├── autoupdate_test.rb
            ├── default_test.rb
            ├── software_test.rb
            └── webserver_test.rb

11 directories, 21 files
[root@ip-172-31-8-220 webserver]# vi recipes/software.rb
[root@ip-172-31-8-220 webserver]# cd ..
[root@ip-172-31-8-220 cookbooks]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Uploading /tmp/d20251006-3251-z3c1ms/webserver/recipes/software.rb (checksum hex = 9f522c8741028b6a6280790f256b3841) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-9f522c8741028b6a6280790f256b3841?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T144951Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=20afed9876b844ebafcb0b0aad745bfbaac3414d7f6441a96e0e03d9c354ffa2
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]# knife role from file role/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: Could not find or open file 'role/webserver.rb' in current directory or in 'roles/role/webserver.rb'
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role webserver
[root@ip-172-31-8-220 chef-repo]# tree
.
├── README.md
├── cookbooks
│   ├── chefignore
│   ├── starter
│   │   ├── attributes
│   │   │   └── default.rb
│   │   ├── files
│   │   │   └── default
│   │   │       └── sample.txt
│   │   ├── metadata.rb
│   │   ├── recipes
│   │   │   └── default.rb
│   │   └── templates
│   │       └── default
│   │           └── sample.erb
│   └── webserver
│       ├── CHANGELOG.md
│       ├── LICENSE
│       ├── Policyfile.rb
│       ├── README.md
│       ├── automate.rb
│       ├── chefignore
│       ├── compliance
│       │   ├── README.md
│       │   ├── inputs
│       │   ├── profiles
│       │   └── waivers
│       ├── kitchen.yml
│       ├── metadata.rb
│       ├── recipes
│       │   ├── autoupdate.rb
│       │   ├── default.rb
│       │   ├── software.rb
│       │   └── webserver.rb
│       ├── spec
│       │   ├── spec_helper.rb
│       │   └── unit
│       │       └── recipes
│       │           ├── autoupdate_spec.rb
│       │           ├── software_spec.rb
│       │           └── webserver_spec.rb
│       └── test
│           └── integration
│               └── default
│                   ├── autoupdate_test.rb
│                   ├── default_test.rb
│                   ├── software_test.rb
│                   └── webserver_test.rb
├── id_rsa.pem
└── roles
    ├── starter.rb
    └── webserver.rb

21 directories, 31 files
[root@ip-172-31-8-220 chef-repo]# vi cookbooks/webserver/recipes/software.rb
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role webserver
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# ls
starter.rb  webserver.rb
[root@ip-172-31-8-220 roles]# vi webserver.rb
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: ArgumentError: Unable to create Chef::RunList::RunListItem from String:"recipe[webserver::autoupdate],recipe[webserver::software],recipe[webserver::webserver]": must be recipe[] or role[]
[root@ip-172-31-8-220 chef-repo]# cd roles/
[root@ip-172-31-8-220 roles]# ls
starter.rb  webserver.rb
[root@ip-172-31-8-220 roles]# vi webserver.rb
[root@ip-172-31-8-220 roles]# knife role from file roles/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
ERROR: Could not find or open file 'roles/webserver.rb' in current directory or in 'roles/roles/webserver.rb'
[root@ip-172-31-8-220 roles]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role webserver
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]#
Broadcast message from root@ip-172-31-8-220.ap-south-1.compute.internal (Mon 2025-10-06 15:05:29 UTC):

The system will power off now!


Broadcast message from root@ip-172-31-8-220.ap-south-1.compute.internal (Mon 2025-10-06 15:05:29 UTC):

The system will power off now!

Connection to 13.201.76.161 closed by remote host.
Connection to 13.201.76.161 closed.
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac>
PS C:\Users\Gaurav.26\downloads\repo\Linux-mac> ssh -i .\id_rsa ec2-user@3.110.114.12
The authenticity of host '3.110.114.12 (3.110.114.12)' can't be established.
ED25519 key fingerprint is SHA256:bwQiJsJXrNpyWX8rwAvfGl2MHw0dFNaCOu5YGVqT/3Q.
This host key is known by the following other names/addresses:
    C:\Users\Gaurav.26/.ssh/known_hosts:161: 43.204.145.143
    C:\Users\Gaurav.26/.ssh/known_hosts:167: 13.201.76.161
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '3.110.114.12' (ED25519) to the list of known hosts.

A newer release of "Amazon Linux" is available.
  Version 2023.8.20250908:
  Version 2023.8.20250915:
  Version 2023.9.20250929:
Run "/usr/bin/dnf check-release-update" for full release and version update info
   ,     #_
   ~\_  ####_        Amazon Linux 2023
  ~~  \_#####\
  ~~     \###|
  ~~       \#/ ___   https://aws.amazon.com/linux/amazon-linux-2023
   ~~       V~' '->
    ~~~         /
      ~~._.   _/
         _/ _/
       _/m/'
Last login: Mon Oct  6 14:23:32 2025 from 103.146.111.100
[ec2-user@ip-172-31-8-220 ~]$ sudo su
[root@ip-172-31-8-220 ec2-user]#
[root@ip-172-31-8-220 ec2-user]# cd chef-repo/
[root@ip-172-31-8-220 chef-repo]# ls
README.md  cookbooks  id_rsa.pem  roles
[root@ip-172-31-8-220 chef-repo]# co cookbooks/
bash: co: command not found
[root@ip-172-31-8-220 chef-repo]# cd cookbooks/
[root@ip-172-31-8-220 cookbooks]# ls
chefignore  starter  webserver
[root@ip-172-31-8-220 cookbooks]# cd webserver/
[root@ip-172-31-8-220 webserver]# ls
CHANGELOG.md  LICENSE  Policyfile.rb  README.md  automate.rb  chefignore  compliance  kitchen.yml  metadata.rb  recipes spec  test
[root@ip-172-31-8-220 webserver]# tree
.
├── CHANGELOG.md
├── LICENSE
├── Policyfile.rb
├── README.md
├── automate.rb
├── chefignore
├── compliance
│   ├── README.md
│   ├── inputs
│   ├── profiles
│   └── waivers
├── kitchen.yml
├── metadata.rb
├── recipes
│   ├── autoupdate.rb
│   ├── default.rb
│   ├── software.rb
│   └── webserver.rb
├── spec
│   ├── spec_helper.rb
│   └── unit
│       └── recipes
│           ├── autoupdate_spec.rb
│           ├── software_spec.rb
│           └── webserver_spec.rb
└── test
    └── integration
        └── default
            ├── autoupdate_test.rb
            ├── default_test.rb
            ├── software_test.rb
            └── webserver_test.rb

11 directories, 21 files
[root@ip-172-31-8-220 webserver]# vi recipes/software.rb
[root@ip-172-31-8-220 webserver]# cd ..
[root@ip-172-31-8-220 cookbooks]# cd ..
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Uploading /tmp/d20251006-2453-bjk2d9/webserver/recipes/software.rb (checksum hex = 216d28e260c1f22dfdc601541f80980f) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-216d28e260c1f22dfdc601541f80980f?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T153149Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=3b13e219b2a72c1b84db2c55dc69c697f8b2342e18d0ec1d5d74805e39907eb2
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role webserver
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]# vi cookbooks/webserver/recipes/webserver.rb
[root@ip-172-31-8-220 chef-repo]# knife cookbook upload webserver
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Uploading webserver      [0.1.0]
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Saving webserver
INFO: Uploading files
INFO: Uploading /tmp/d20251006-2588-21jtnk/webserver/recipes/webserver.rb (checksum hex = 693203b30f7e480430d9eb7ba672b788) to https://ip-172-31-15-230.ap-south-1.compute.internal:443/bookshelf/organization-c48d9505ae1831f4d931b387bc2f4c18/checksum-693203b30f7e480430d9eb7ba672b788?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=419b15baf7f80041b12e3e4fe05b3c59f6dec0b2%2F20251006%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251006T153439Z&X-Amz-Expires=900&X-Amz-SignedHeaders=content-md5%3Bcontent-type%3Bhost&X-Amz-Signature=4170c6c8524f4748015c973be4e8fd3f75fbe48b3e0c6be3037f17b5db8c2e2b
INFO: Upload complete!
Uploaded 1 cookbook.
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role webserver
[root@ip-172-31-8-220 chef-repo]# knife role from file roles/webserver.rb
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
Updated Role webserver
[root@ip-172-31-8-220 chef-repo]# knife node run_list add webnode "role[webserver]"
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode:
  run_list: role[webserver]
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode
[root@ip-172-31-8-220 chef-repo]# knife bootstrap 172.31.7.128 -N node2 --ssh-user ec2-user --ssh-identity-file id_rsa.pem --sudo -VV
--ssh-user: This flag is deprecated. Use -U/--connection-user instead.
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
DEBUG: Checking if we need to accept Chef license to bootstrap node
DEBUG: Reading products and relationships...
DEBUG: Successfully read products and relationships
DEBUG: License acceptance required for chef version: 18
DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
DEBUG: Missing licenses remaining: []
DEBUG: All licenses present
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:always}
The authenticity of host '172.31.7.128 ()' can't be established.
fingerprint is SHA256:N2j7ar6bwtgFLs9KFT9ob4GcOxdjpfJmK6LGABNLXvM.

Are you sure you want to continue connecting
? (Y/N) y
Connecting to 172.31.7.128 using ssh
DEBUG: [SSH] opening connection to ec2-user@172.31.7.128
DEBUG: [SSH] using options {:user_known_hosts_file=>"/dev/null", :port=>22, :compression=>false, :compression_level=>0,:keepalive=>true, :keepalive_interval=>60, :timeout=>60, :auth_methods=>["none", "publickey"], :keys_only=>true, :keys=>["id_rsa.pem"], :password=>"<hidden>", :forward_agent=>false, :non_interactive=>true, :append_all_supported_algorithms=>true, :config=>true, :verify_host_key=>:accept_new}
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = cmd.exe /c ver
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = Get-WmiObject Win32_OperatingSystem | Select Caption,Version | ConvertTo-Json
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -s
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = uname -m
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/debian_version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/os-release && cat /etc/os-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = show version
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/lsb-release && cat /etc/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /usr/bin/lsb-release && cat /usr/bin/lsb-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/oracle-release && cat /etc/oracle-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/enterprise-release && cat /etc/enterprise-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/parallels-release && cat /etc/parallels-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = test -f /etc/system-release && cat /etc/system-release
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sh -c '(sudo echo) < /dev/null'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo echo '[SSH] Established'
WARNING: Performing legacy client registration with the validation key at /home/ec2-user/chef-repo/.chef/dropmail-validator.pem...
WARNING: Remove the key file or remove the 'validation_key' configuration option from your config.rb (knife.rb) to use more secure user credentials for client registration.
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo mkdir -p '/tmp/chef_QqITIH'
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo chown ec2-user '/tmp/chef_QqITIH'
Bootstrapping 172.31.7.128
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo sh /tmp/chef_QqITIH/bootstrap.sh
 [172.31.7.128] -----> Existing Chef Infra Client installation detected
 [172.31.7.128] Starting the first Chef Infra Client Client run...
 [172.31.7.128] [2025-10-06T15:39:30+00:00] DEBUG: Reading products and relationships...
 [172.31.7.128] [2025-10-06T15:39:30+00:00] DEBUG: Successfully read products and relationships
 [172.31.7.128] [2025-10-06T15:39:30+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
 [172.31.7.128] [2025-10-06T15:39:30+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
 [172.31.7.128] [2025-10-06T15:39:30+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
 [172.31.7.128] [2025-10-06T15:39:30+00:00] DEBUG: Missing licenses remaining: []
 [172.31.7.128] [2025-10-06T15:39:30+00:00] DEBUG: All licenses present
 [172.31.7.128] [2025-10-06T15:39:30+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] Chef Infra Client, version 18.8.11
 [172.31.7.128]
 [172.31.7.128] Patents: https://www.chef.io/patents
 [172.31.7.128]
 [172.31.7.128] Infra Phase starting
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T15:39:30+00:00] INFO: *** Chef Infra Client 18.8.11 ***
 [172.31.7.128] [2025-10-06T15:39:30+00:00] INFO: Platform: x86_64-linux
 [172.31.7.128] [2025-10-06T15:39:30+00:00] INFO: Chef-client pid: 2990
 [172.31.7.128] [2025-10-06T15:39:30+00:00] DEBUG: Chef-client request_id: 7b7430d4-140b-43af-b699-9c5ecac3bd05
 [172.31.7.128] [2025-10-06T15:39:30+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
rx-checksumming: on [fixed]
tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
generic-segmentation-offload: on
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: off [fixed]
rx-vlan-filter: off [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: on [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-gre-csum-segmentation: off [fixed]
tx-ipxip4-segmentation: off [fixed]
tx-ipxip6-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
tx-udp_tnl-csum-segmentation: off [fixed]
tx-gso-partial: off [fixed]
tx-tunnel-remcsum-segmentation: off [fixed]
tx-sctp-segmentation: off [fixed]
tx-esp-segmentation: off [fixed]
tx-udp-segmentation: off [fixed]
tx-gso-list: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
hw-tc-offload: off [fixed]
esp-hw-offload: off [fixed]
esp-tx-csum-hw-offload: off [fixed]
rx-udp_tunnel-port-offload: off [fixed]
tls-hw-tx-offload: off [fixed]
tls-hw-rx-offload: off [fixed]
rx-gro-hw: off [fixed]
tls-hw-record: off [fixed]
rx-gro-list: off
macsec-hw-offload: off [fixed]
rx-udp-gro-forwarding: off
hsr-tag-ins-offload: off [fixed]
hsr-tag-rm-offload: off [fixed]
hsr-fwd-offload: off [fixed]
hsr-dup-offload: off [fixed]

 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
 [172.31.7.128] [2025-10-06T15:39:31+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:32+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128]
 [172.31.7.128] ================================================================================
 [172.31.7.128]
 [172.31.7.128] Chef Infra Client encountered an error attempting to load the node data for "node2"
 [172.31.7.128]
 [172.31.7.128] ================================================================================
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Authentication Error:
 [172.31.7.128]
 [172.31.7.128] ---------------------
 [172.31.7.128]
 [172.31.7.128] Failed to authenticate to the chef server (http 401).
 [172.31.7.128]
 [172.31.7.128] Server Response:
 [172.31.7.128]
 [172.31.7.128] ----------------
 [172.31.7.128]
 [172.31.7.128] Failed to authenticate as 'node2'. Ensure that your node_name and client key are correct.
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Relevant Config Settings:
 [172.31.7.128]
 [172.31.7.128] -------------------------
 [172.31.7.128]
 [172.31.7.128] chef_server_url   "https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail"
 [172.31.7.128] node_name         "node2"
 [172.31.7.128] client_key        "/etc/chef/client.pem"
 [172.31.7.128]
 [172.31.7.128] If these settings are correct, your client_key may be invalid, or
 [172.31.7.128] you may have a chef user with the same client name as this node.
 [172.31.7.128]
 [172.31.7.128] System Info:
 [172.31.7.128]
 [172.31.7.128] ------------
 [172.31.7.128]
 [172.31.7.128] chef_version=18.8.11
 [172.31.7.128] ruby=ruby 3.1.7p261 (2025-03-26 revision 0a3704f218) [x86_64-linux]
 [172.31.7.128] program_name=/usr/bin/chef-client
 [172.31.7.128] executable=/opt/chef/bin/chef-client
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128]
 [172.31.7.128] Running handlers:
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T15:39:32+00:00] ERROR: Running exception handlers
 [172.31.7.128] Running handlers complete
 [172.31.7.128] [2025-10-06T15:39:32+00:00] ERROR: Exception handlers complete
 [172.31.7.128] Infra Phase failed. 0 resources updated in 01 seconds
 [172.31.7.128]
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: opened
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
 [172.31.7.128] [2025-10-06T15:39:32+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
 [172.31.7.128] [2025-10-06T15:39:32+00:00] FATAL: ---------------------------------------------------------------------------------------
 [172.31.7.128] [2025-10-06T15:39:32+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
 [172.31.7.128] [2025-10-06T15:39:32+00:00] FATAL: ---------------------------------------------------------------------------------------
 [172.31.7.128] [2025-10-06T15:39:32+00:00] DEBUG: Net::HTTPClientException: 401 "Unauthorized"
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/net-http-0.6.0/lib/net/http/response.rb:277:in `error!'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:159:in `request'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:122:in `get'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:653:in `load'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:636:in `find_or_create'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/policy_builder/dynamic.rb:74:in `load_node'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:450:in `load_node'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:281:in `run'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:305:in `run_with_graceful_exit_option'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:281:in `block in run_chef_client'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/local_mode.rb:42:in `with_server_connectivity'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:264:in `run_chef_client'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application/base.rb:354:in `run_application'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:67:in `run'
/opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-bin-18.8.11/bin/chef-client:25:in `<top (required)>'
/usr/bin/chef-client:193:in `load'
/usr/bin/chef-client:193:in `<main>'
 [172.31.7.128] [2025-10-06T15:39:32+00:00] FATAL: Net::HTTPClientException: 401 "Unauthorized"
ERROR: The following error occurred on 172.31.7.128:
ERROR: -----> Existing Chef Infra Client installation detected
     Starting the first Chef Infra Client Client run...
     [2025-10-06T15:39:30+00:00] DEBUG: Reading products and relationships...
     [2025-10-06T15:39:30+00:00] DEBUG: Successfully read products and relationships
     [2025-10-06T15:39:30+00:00] DEBUG: Searching for the following licenses: ["infra-client", "inspec"]
     [2025-10-06T15:39:30+00:00] DEBUG: Found license chef_infra_client at /etc/chef/accepted_licenses/chef_infra_client
     [2025-10-06T15:39:30+00:00] DEBUG: Found license inspec at /etc/chef/accepted_licenses/inspec
     [2025-10-06T15:39:30+00:00] DEBUG: Missing licenses remaining: []
     [2025-10-06T15:39:30+00:00] DEBUG: All licenses present
     [2025-10-06T15:39:30+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
     Chef Infra Client, version 18.8.11
     Patents: https://www.chef.io/patents
     Infra Phase starting
     [2025-10-06T15:39:30+00:00] INFO: *** Chef Infra Client 18.8.11 ***
     [2025-10-06T15:39:30+00:00] INFO: Platform: x86_64-linux
     [2025-10-06T15:39:30+00:00] INFO: Chef-client pid: 2990
     [2025-10-06T15:39:30+00:00] DEBUG: Chef-client request_id: 7b7430d4-140b-43af-b699-9c5ecac3bd05
     [2025-10-06T15:39:30+00:00] DEBUG: Running Ohai with the following configuration: {:logger=>Chef::Log}
     [2025-10-06T15:39:31+00:00] DEBUG: Plugin Network: Parsing ethtool output: Features for enX0:
     rx-checksumming: on [fixed]
     tx-checksumming: on
        tx-checksum-ipv4: on [fixed]
        tx-checksum-ip-generic: off [fixed]
        tx-checksum-ipv6: on
        tx-checksum-fcoe-crc: off [fixed]
        tx-checksum-sctp: off [fixed]
     scatter-gather: on
        tx-scatter-gather: on
        tx-scatter-gather-fraglist: off [fixed]
     tcp-segmentation-offload: on
        tx-tcp-segmentation: on
        tx-tcp-ecn-segmentation: off [fixed]
        tx-tcp-mangleid-segmentation: off
        tx-tcp6-segmentation: on
     generic-segmentation-offload: on
     generic-receive-offload: on
     large-receive-offload: off [fixed]
     rx-vlan-offload: off [fixed]
     tx-vlan-offload: off [fixed]
     ntuple-filters: off [fixed]
     receive-hashing: off [fixed]
     highdma: off [fixed]
     rx-vlan-filter: off [fixed]
     vlan-challenged: off [fixed]
     tx-lockless: off [fixed]
     netns-local: off [fixed]
     tx-gso-robust: on [fixed]
     tx-fcoe-segmentation: off [fixed]
     tx-gre-segmentation: off [fixed]
     tx-gre-csum-segmentation: off [fixed]
     tx-ipxip4-segmentation: off [fixed]
     tx-ipxip6-segmentation: off [fixed]
     tx-udp_tnl-segmentation: off [fixed]
     tx-udp_tnl-csum-segmentation: off [fixed]
     tx-gso-partial: off [fixed]
     tx-tunnel-remcsum-segmentation: off [fixed]
     tx-sctp-segmentation: off [fixed]
     tx-esp-segmentation: off [fixed]
     tx-udp-segmentation: off [fixed]
     tx-gso-list: off [fixed]
     fcoe-mtu: off [fixed]
     tx-nocache-copy: off
     loopback: off [fixed]
     rx-fcs: off [fixed]
     rx-all: off [fixed]
     tx-vlan-stag-hw-insert: off [fixed]
     rx-vlan-stag-hw-parse: off [fixed]
     rx-vlan-stag-filter: off [fixed]
     l2-fwd-offload: off [fixed]
     hw-tc-offload: off [fixed]
     esp-hw-offload: off [fixed]
     esp-tx-csum-hw-offload: off [fixed]
     rx-udp_tunnel-port-offload: off [fixed]
     tls-hw-tx-offload: off [fixed]
     tls-hw-rx-offload: off [fixed]
     rx-gro-hw: off [fixed]
     tls-hw-record: off [fixed]
     rx-gro-list: off
     macsec-hw-offload: off [fixed]
     rx-udp-gro-forwarding: off
     hsr-tag-ins-offload: off [fixed]
     hsr-tag-rm-offload: off [fixed]
     hsr-fwd-offload: off [fixed]
     hsr-dup-offload: off [fixed]

     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:31+00:00] DEBUG: opening connection to 169.254.169.254:80...
     [2025-10-06T15:39:31+00:00] DEBUG: opened
     [2025-10-06T15:39:32+00:00] ERROR: shard_seed: Failed to get dmi property serial_number: is dmidecode installed?
     [2025-10-06T15:39:32+00:00] DEBUG: Plugin Zpools: Could not shell_out "zpool list -H -o name,size,alloc,free,cap,dedup,health,version". Skipping plugin.
     [2025-10-06T15:39:32+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T15:39:32+00:00] DEBUG: opened
     [2025-10-06T15:39:32+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T15:39:32+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384

     ================================================================================
     Chef Infra Client encountered an error attempting to load the node data for "node2"
     ================================================================================

     Authentication Error:
     ---------------------
     Failed to authenticate to the chef server (http 401).

     Server Response:
     ----------------
     Failed to authenticate as 'node2'. Ensure that your node_name and client key are correct.

     Relevant Config Settings:
     -------------------------
     chef_server_url   "https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail"
     node_name         "node2"
     client_key        "/etc/chef/client.pem"

     If these settings are correct, your client_key may be invalid, or
     you may have a chef user with the same client name as this node.

     System Info:
     ------------
     chef_version=18.8.11
     ruby=ruby 3.1.7p261 (2025-03-26 revision 0a3704f218) [x86_64-linux]
     program_name=/usr/bin/chef-client
     executable=/opt/chef/bin/chef-client


     Running handlers:
     [2025-10-06T15:39:32+00:00] ERROR: Running exception handlers
     Running handlers complete
     [2025-10-06T15:39:32+00:00] ERROR: Exception handlers complete
     Infra Phase failed. 0 resources updated in 01 seconds
     [2025-10-06T15:39:32+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T15:39:32+00:00] DEBUG: opened
     [2025-10-06T15:39:32+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T15:39:32+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
     [2025-10-06T15:39:32+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
     [2025-10-06T15:39:32+00:00] DEBUG: opening connection to ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T15:39:32+00:00] DEBUG: opened
     [2025-10-06T15:39:32+00:00] DEBUG: starting SSL for ip-172-31-15-230.ap-south-1.compute.internal:443...
     [2025-10-06T15:39:32+00:00] DEBUG: SSL established, protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384
     [2025-10-06T15:39:32+00:00] DEBUG: Error while reporting run start to Data Collector. URL: https://ip-172-31-15-230.ap-south-1.compute.internal/organizations/dropmail/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
     [2025-10-06T15:39:32+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
     [2025-10-06T15:39:32+00:00] FATAL: ---------------------------------------------------------------------------------------
     [2025-10-06T15:39:32+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
     [2025-10-06T15:39:32+00:00] FATAL: ---------------------------------------------------------------------------------------
     [2025-10-06T15:39:32+00:00] DEBUG: Net::HTTPClientException: 401 "Unauthorized"
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/net-http-0.6.0/lib/net/http/response.rb:277:in `error!'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:159:in `request'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/http.rb:122:in `get'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:653:in `load'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/node.rb:636:in `find_or_create'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/policy_builder/dynamic.rb:74:in `load_node'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:450:in `load_node'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/client.rb:281:in `run'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:305:in `run_with_graceful_exit_option'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:281:in `block in run_chef_client'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/local_mode.rb:42:in `with_server_connectivity'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:264:in `run_chef_client'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application/base.rb:354:in `run_application'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-18.8.11/lib/chef/application.rb:67:in `run'
     /opt/chef/embedded/lib/ruby/gems/3.1.0/gems/chef-bin-18.8.11/bin/chef-client:25:in `<top (required)>'
     /usr/bin/chef-client:193:in `load'
     /usr/bin/chef-client:193:in `<main>'
     [2025-10-06T15:39:32+00:00] FATAL: Net::HTTPClientException: 401 "Unauthorized"
DEBUG: [SSH] ec2-user@172.31.7.128 cmd = sudo rm -f "/tmp/chef_QqITIH/bootstrap.sh"
[root@ip-172-31-8-220 chef-repo]# knife node list
INFO: Using configuration from /home/ec2-user/chef-repo/.chef/config.rb
webnode
[root@ip-172-31-8-220 chef-repo]# kno
